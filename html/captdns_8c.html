<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeterLogger: user/captdns.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MeterLogger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2584a8ef173e30cec0336a2c92688588.html">user</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">captdns.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="esp8266_8h_source.html">esp8266.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ip_8h_source.html">lwip/ip.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="udp_8h_source.html">lwip/udp.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="tcp__impl_8h_source.html">lwip/tcp_impl.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="etharp_8h_source.html">netif/etharp.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="netif_8h_source.html">lwip/netif.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lwip__napt_8h_source.html">lwip/lwip_napt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="dns_8h_source.html">lwip/dns.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="dhcpserver_8h_source.html">lwip/app/dhcpserver.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="opt_8h_source.html">lwip/opt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sdk_2include_2espconn_8h_source.html">espconn.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for captdns.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c__incl.svg" width="2240" height="934"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="captdns_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a15a2237f736c340b151e2c5c957bccf9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a15a2237f736c340b151e2c5c957bccf9">DNS_LEN</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a15a2237f736c340b151e2c5c957bccf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e725ea85b752668819444c39e4f607c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a8e725ea85b752668819444c39e4f607c">FLAG_QR</a>&#160;&#160;&#160;(1&lt;&lt;7)</td></tr>
<tr class="separator:a8e725ea85b752668819444c39e4f607c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ca8b36c28dfc1874f9484c27c8bb3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#aa5ca8b36c28dfc1874f9484c27c8bb3f">FLAG_AA</a>&#160;&#160;&#160;(1&lt;&lt;2)</td></tr>
<tr class="separator:aa5ca8b36c28dfc1874f9484c27c8bb3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc6e2e07e082c775cd1efaf00bef4256"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#acc6e2e07e082c775cd1efaf00bef4256">FLAG_TC</a>&#160;&#160;&#160;(1&lt;&lt;1)</td></tr>
<tr class="separator:acc6e2e07e082c775cd1efaf00bef4256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ae8327cbc391245c621bd4e41d67e89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a9ae8327cbc391245c621bd4e41d67e89">FLAG_RD</a>&#160;&#160;&#160;(1&lt;&lt;0)</td></tr>
<tr class="separator:a9ae8327cbc391245c621bd4e41d67e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c396d095344cd7d0bee1734963f684"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#af2c396d095344cd7d0bee1734963f684">QTYPE_A</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af2c396d095344cd7d0bee1734963f684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8003df31e26989c5ab40dff7fc601a58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a8003df31e26989c5ab40dff7fc601a58">QTYPE_NS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a8003df31e26989c5ab40dff7fc601a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45aa6d9ec7dbc657f1128bd31e1a91f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a45aa6d9ec7dbc657f1128bd31e1a91f0">QTYPE_CNAME</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a45aa6d9ec7dbc657f1128bd31e1a91f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92fef1a1a79a2bb3dd20379f911849d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#ac92fef1a1a79a2bb3dd20379f911849d">QTYPE_SOA</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:ac92fef1a1a79a2bb3dd20379f911849d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598e57d0f0f8970d67ba124d17db0ed5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a598e57d0f0f8970d67ba124d17db0ed5">QTYPE_WKS</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:a598e57d0f0f8970d67ba124d17db0ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a04223e6d00b7e93f5842402b7aafd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a32a04223e6d00b7e93f5842402b7aafd">QTYPE_PTR</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a32a04223e6d00b7e93f5842402b7aafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d63d2f330cfd1589873488c4ae8dc46"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a6d63d2f330cfd1589873488c4ae8dc46">QTYPE_HINFO</a>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a6d63d2f330cfd1589873488c4ae8dc46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb01a62911e384683ccfc17d393c65b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a2bb01a62911e384683ccfc17d393c65b">QTYPE_MINFO</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a2bb01a62911e384683ccfc17d393c65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f84a498ef8ddf59c1b814925c84380d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a4f84a498ef8ddf59c1b814925c84380d">QTYPE_MX</a>&#160;&#160;&#160;15</td></tr>
<tr class="separator:a4f84a498ef8ddf59c1b814925c84380d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d3461ceb72695d7f41123f66c99968c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a6d3461ceb72695d7f41123f66c99968c">QTYPE_TXT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a6d3461ceb72695d7f41123f66c99968c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae80a81f2eb30f1597242691063bad1a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#aae80a81f2eb30f1597242691063bad1a">QTYPE_URI</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:aae80a81f2eb30f1597242691063bad1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed8448821b2cf18800c02ae8b83d355"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#abed8448821b2cf18800c02ae8b83d355">QCLASS_IN</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:abed8448821b2cf18800c02ae8b83d355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf0607193c150640ad520eb3987a459"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#aabf0607193c150640ad520eb3987a459">QCLASS_ANY</a>&#160;&#160;&#160;255</td></tr>
<tr class="separator:aabf0607193c150640ad520eb3987a459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280f4d6e370c73348083cc62a04e90cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a280f4d6e370c73348083cc62a04e90cb">QCLASS_URI</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a280f4d6e370c73348083cc62a04e90cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab898071398b359603a35c202e9c65f3b"><td class="memItemLeft" align="right" valign="top">struct&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#ab898071398b359603a35c202e9c65f3b">__attribute__</a> ((packed))</td></tr>
<tr class="separator:ab898071398b359603a35c202e9c65f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b65a462da5bbfc4c310605b66952949"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a> (void *pp, int16_t n)</td></tr>
<tr class="separator:a3b65a462da5bbfc4c310605b66952949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0e85473ca50e7bc9726c0e0314310f"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#aad0e85473ca50e7bc9726c0e0314310f">setn32</a> (void *pp, int32_t n)</td></tr>
<tr class="separator:aad0e85473ca50e7bc9726c0e0314310f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9dc30f1b5c34d34788f966f8baf579"><td class="memItemLeft" align="right" valign="top">static uint16_t <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a> (uint16_t *in)</td></tr>
<tr class="separator:a2b9dc30f1b5c34d34788f966f8baf579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cda566d8dc5035086e911607e45820b"><td class="memItemLeft" align="right" valign="top">static char *<a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a1cda566d8dc5035086e911607e45820b">labelToStr</a> (char *packet, char *labelPtr, int packetSz, char *res, int resMaxLen)</td></tr>
<tr class="separator:a1cda566d8dc5035086e911607e45820b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65a5932a7432c62e039b6366cedb733"><td class="memItemLeft" align="right" valign="top">static char <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#ab65a5932a7432c62e039b6366cedb733">strToLabel</a> (char *str, char *label, int maxLen)</td></tr>
<tr class="separator:ab65a5932a7432c62e039b6366cedb733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c9a28ea1f015cff27b9d0c252d15f3"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a59c9a28ea1f015cff27b9d0c252d15f3">captdnsRecv</a> (void *arg, char *pusrdata, unsigned short length)</td></tr>
<tr class="separator:a59c9a28ea1f015cff27b9d0c252d15f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f42288d1b84cab204cca9e7f7aa9a3"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a88f42288d1b84cab204cca9e7f7aa9a3">captdnsInit</a> (void)</td></tr>
<tr class="separator:a88f42288d1b84cab204cca9e7f7aa9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94930b306da4c43c4325612a8a538db"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#aa94930b306da4c43c4325612a8a538db">captdnsStop</a> (void)</td></tr>
<tr class="separator:aa94930b306da4c43c4325612a8a538db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8ac405da3aa7e2e078859dd8214cc5a1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structespconn.html">espconn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a></td></tr>
<tr class="separator:a8ac405da3aa7e2e078859dd8214cc5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43123036321354db8c5a5ee5eb3e19a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a></td></tr>
<tr class="separator:a43123036321354db8c5a5ee5eb3e19a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c5913789c2f46752baa880646bba11d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a3c5913789c2f46752baa880646bba11d">DnsLabel</a></td></tr>
<tr class="separator:a3c5913789c2f46752baa880646bba11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a1b1d68789477988c78a6a94c7d52d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a35a1b1d68789477988c78a6a94c7d52d">DnsQuestionFooter</a></td></tr>
<tr class="separator:a35a1b1d68789477988c78a6a94c7d52d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e8eb62bae268243c6a1b277d19394c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a></td></tr>
<tr class="separator:a69e8eb62bae268243c6a1b277d19394c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada743c33a17ed7ef8a1fa6eb02a7a64e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="captdns_8c.html#ada743c33a17ed7ef8a1fa6eb02a7a64e">DnsUriHdr</a></td></tr>
<tr class="separator:ada743c33a17ed7ef8a1fa6eb02a7a64e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a15a2237f736c340b151e2c5c957bccf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a2237f736c340b151e2c5c957bccf9">&#9670;&nbsp;</a></span>DNS_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DNS_LEN&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00047">47</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="aa5ca8b36c28dfc1874f9484c27c8bb3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ca8b36c28dfc1874f9484c27c8bb3f">&#9670;&nbsp;</a></span>FLAG_AA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_AA&#160;&#160;&#160;(1&lt;&lt;2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00093">93</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a8e725ea85b752668819444c39e4f607c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e725ea85b752668819444c39e4f607c">&#9670;&nbsp;</a></span>FLAG_QR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_QR&#160;&#160;&#160;(1&lt;&lt;7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00092">92</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a9ae8327cbc391245c621bd4e41d67e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ae8327cbc391245c621bd4e41d67e89">&#9670;&nbsp;</a></span>FLAG_RD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_RD&#160;&#160;&#160;(1&lt;&lt;0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00095">95</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="acc6e2e07e082c775cd1efaf00bef4256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc6e2e07e082c775cd1efaf00bef4256">&#9670;&nbsp;</a></span>FLAG_TC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_TC&#160;&#160;&#160;(1&lt;&lt;1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00094">94</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="aabf0607193c150640ad520eb3987a459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf0607193c150640ad520eb3987a459">&#9670;&nbsp;</a></span>QCLASS_ANY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QCLASS_ANY&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00110">110</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="abed8448821b2cf18800c02ae8b83d355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed8448821b2cf18800c02ae8b83d355">&#9670;&nbsp;</a></span>QCLASS_IN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QCLASS_IN&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00109">109</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a280f4d6e370c73348083cc62a04e90cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280f4d6e370c73348083cc62a04e90cb">&#9670;&nbsp;</a></span>QCLASS_URI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QCLASS_URI&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00111">111</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="af2c396d095344cd7d0bee1734963f684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c396d095344cd7d0bee1734963f684">&#9670;&nbsp;</a></span>QTYPE_A</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_A&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00097">97</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a45aa6d9ec7dbc657f1128bd31e1a91f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45aa6d9ec7dbc657f1128bd31e1a91f0">&#9670;&nbsp;</a></span>QTYPE_CNAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_CNAME&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00099">99</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a6d63d2f330cfd1589873488c4ae8dc46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d63d2f330cfd1589873488c4ae8dc46">&#9670;&nbsp;</a></span>QTYPE_HINFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_HINFO&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00103">103</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a2bb01a62911e384683ccfc17d393c65b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb01a62911e384683ccfc17d393c65b">&#9670;&nbsp;</a></span>QTYPE_MINFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_MINFO&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00104">104</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a4f84a498ef8ddf59c1b814925c84380d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f84a498ef8ddf59c1b814925c84380d">&#9670;&nbsp;</a></span>QTYPE_MX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_MX&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00105">105</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a8003df31e26989c5ab40dff7fc601a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8003df31e26989c5ab40dff7fc601a58">&#9670;&nbsp;</a></span>QTYPE_NS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_NS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00098">98</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a32a04223e6d00b7e93f5842402b7aafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32a04223e6d00b7e93f5842402b7aafd">&#9670;&nbsp;</a></span>QTYPE_PTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_PTR&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00102">102</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="ac92fef1a1a79a2bb3dd20379f911849d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac92fef1a1a79a2bb3dd20379f911849d">&#9670;&nbsp;</a></span>QTYPE_SOA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_SOA&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00100">100</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a6d3461ceb72695d7f41123f66c99968c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d3461ceb72695d7f41123f66c99968c">&#9670;&nbsp;</a></span>QTYPE_TXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_TXT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00106">106</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="aae80a81f2eb30f1597242691063bad1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae80a81f2eb30f1597242691063bad1a">&#9670;&nbsp;</a></span>QTYPE_URI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_URI&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00107">107</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a598e57d0f0f8970d67ba124d17db0ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598e57d0f0f8970d67ba124d17db0ed5">&#9670;&nbsp;</a></span>QTYPE_WKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QTYPE_WKS&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00101">101</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab898071398b359603a35c202e9c65f3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab898071398b359603a35c202e9c65f3b">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(packed)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00053">53</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="espconn_8c_source.html#l00448">espconn_sendto()</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                        {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    uint16_t id;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    uint8_t flags;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    uint8_t rcode;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    uint16_t qdcount;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    uint16_t ancount;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    uint16_t nscount;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    uint16_t arcount;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;} <a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a>;</div><div class="ttc" id="captdns_8c_html_a43123036321354db8c5a5ee5eb3e19a2"><div class="ttname"><a href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a></div><div class="ttdeci">DnsHeader</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00061">captdns.c:61</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_ab898071398b359603a35c202e9c65f3b_icgraph.svg" width="560" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a88f42288d1b84cab204cca9e7f7aa9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88f42288d1b84cab204cca9e7f7aa9a3">&#9670;&nbsp;</a></span>captdnsInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> captdnsInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00344">344</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">References <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>, <a class="el" href="espconn_8c_source.html#l00334">espconn_create()</a>, <a class="el" href="espconn_8c_source.html#l00770">espconn_regist_recvcb()</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00056">ESPCONN_UDP</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00083">_esp_udp::local_port</a>, <a class="el" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">espconn::proto</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00101">espconn::type</a>, and <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00106">espconn::udp</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                         {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">static</span> <a class="code" href="struct__esp__udp.html">esp_udp</a> udpconn;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>.<a class="code" href="structespconn.html#a393c997ab67360b4e17485123518595c">type</a>=<a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a822c96862e04f46aff8d65cb8170b60fa85d8592fc339ccda13561161ddfd63f7">ESPCONN_UDP</a>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>.<a class="code" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">proto</a>.<a class="code" href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">udp</a>=&amp;udpconn;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>.<a class="code" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">proto</a>.<a class="code" href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">udp</a>-&gt;<a class="code" href="struct__esp__udp.html#a2c64465322b3d33e8866ff2c87cc1c60">local_port</a> = 53;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a56d063a430d96d20b4ea5e28ba41011c">espconn_regist_recvcb</a>(&amp;<a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>, <a class="code" href="captdns_8c.html#a59c9a28ea1f015cff27b9d0c252d15f3">captdnsRecv</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#ad55b9729c7629f40c8e7ae2d73f7f174">espconn_create</a>(&amp;<a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="ttc" id="struct__esp__udp_html"><div class="ttname"><a href="struct__esp__udp.html">_esp_udp</a></div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00081">espconn.h:81</a></div></div>
<div class="ttc" id="structespconn_html_abf373d8dd0448b17e6062f2b3c0a4677"><div class="ttname"><a href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">espconn::udp</a></div><div class="ttdeci">esp_udp * udp</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00106">espconn.h:106</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_a56d063a430d96d20b4ea5e28ba41011c"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a56d063a430d96d20b4ea5e28ba41011c">espconn_regist_recvcb</a></div><div class="ttdeci">sint8 espconn_regist_recvcb(struct espconn *espconn, espconn_recv_callback recv_cb)</div><div class="ttdef"><b>Definition:</b> <a href="espconn_8c_source.html#l00770">espconn.c:770</a></div></div>
<div class="ttc" id="struct__esp__udp_html_a2c64465322b3d33e8866ff2c87cc1c60"><div class="ttname"><a href="struct__esp__udp.html#a2c64465322b3d33e8866ff2c87cc1c60">_esp_udp::local_port</a></div><div class="ttdeci">int local_port</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00083">espconn.h:83</a></div></div>
<div class="ttc" id="captdns_8c_html_a8ac405da3aa7e2e078859dd8214cc5a1"><div class="ttname"><a href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a></div><div class="ttdeci">static struct espconn conn</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00050">captdns.c:50</a></div></div>
<div class="ttc" id="structespconn_html_ae43b13bd2d8ff1c2b067caad001e5cc8"><div class="ttname"><a href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">espconn::proto</a></div><div class="ttdeci">union espconn::@1 proto</div></div>
<div class="ttc" id="structespconn_html_a393c997ab67360b4e17485123518595c"><div class="ttname"><a href="structespconn.html#a393c997ab67360b4e17485123518595c">espconn::type</a></div><div class="ttdeci">enum espconn_type type</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00101">espconn.h:101</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_a822c96862e04f46aff8d65cb8170b60fa85d8592fc339ccda13561161ddfd63f7"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a822c96862e04f46aff8d65cb8170b60fa85d8592fc339ccda13561161ddfd63f7">ESPCONN_UDP</a></div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00056">espconn.h:56</a></div></div>
<div class="ttc" id="captdns_8c_html_a59c9a28ea1f015cff27b9d0c252d15f3"><div class="ttname"><a href="captdns_8c.html#a59c9a28ea1f015cff27b9d0c252d15f3">captdnsRecv</a></div><div class="ttdeci">static void ICACHE_FLASH_ATTR captdnsRecv(void *arg, char *pusrdata, unsigned short length)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00192">captdns.c:192</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_ad55b9729c7629f40c8e7ae2d73f7f174"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#ad55b9729c7629f40c8e7ae2d73f7f174">espconn_create</a></div><div class="ttdeci">sint8 espconn_create(struct espconn *espconn)</div><div class="ttdef"><b>Definition:</b> <a href="espconn_8c_source.html#l00334">espconn.c:334</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a88f42288d1b84cab204cca9e7f7aa9a3_cgraph.svg" width="1798" height="520"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a88f42288d1b84cab204cca9e7f7aa9a3_icgraph.svg" width="379" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a59c9a28ea1f015cff27b9d0c252d15f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c9a28ea1f015cff27b9d0c252d15f3">&#9670;&nbsp;</a></span>captdnsRecv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> captdnsRecv </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pusrdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00192">192</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">References <a class="el" href="captdns_8c_source.html#l00344">captdnsInit()</a>, <a class="el" href="captdns_8c_source.html#l00050">conn</a>, <a class="el" href="captdns_8c_source.html#l00047">DNS_LEN</a>, <a class="el" href="captdns_8c_source.html#l00061">DnsHeader</a>, <a class="el" href="captdns_8c_source.html#l00074">DnsQuestionFooter</a>, <a class="el" href="captdns_8c_source.html#l00084">DnsResourceFooter</a>, <a class="el" href="captdns_8c_source.html#l00089">DnsUriHdr</a>, <a class="el" href="espconn_8c_source.html#l00825">espconn_get_connection_info()</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00020">ESPCONN_OK</a>, <a class="el" href="espconn_8c_source.html#l00448">espconn_sendto()</a>, <a class="el" href="captdns_8c_source.html#l00092">FLAG_QR</a>, <a class="el" href="captdns_8c_source.html#l00094">FLAG_TC</a>, <a class="el" href="def_8h_source.html#l00081">htons</a>, <a class="el" href="c__types_8h_source.html#l00099">ICACHE_FLASH_ATTR</a>, <a class="el" href="inet_8h_source.html#l00053">INADDR_ANY</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00248">ip_info::ip</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00220">ip4_addr1</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00221">ip4_addr2</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00222">ip4_addr3</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00223">ip4_addr4</a>, <a class="el" href="captdns_8c_source.html#l00138">labelToStr()</a>, <a class="el" href="platform_8h_source.html#l00022">memcpy</a>, <a class="el" href="platform_8h_source.html#l00021">memset</a>, <a class="el" href="captdns_8c_source.html#l00130">my_ntohs()</a>, <a class="el" href="def_8h_source.html#l00047">NULL</a>, <a class="el" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">espconn::proto</a>, <a class="el" href="captdns_8c_source.html#l00109">QCLASS_IN</a>, <a class="el" href="captdns_8c_source.html#l00111">QCLASS_URI</a>, <a class="el" href="captdns_8c_source.html#l00097">QTYPE_A</a>, <a class="el" href="captdns_8c_source.html#l00098">QTYPE_NS</a>, <a class="el" href="captdns_8c_source.html#l00107">QTYPE_URI</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00085">_esp_udp::remote_ip</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00091">_remot_info::remote_ip</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00082">_esp_udp::remote_port</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00090">_remot_info::remote_port</a>, <a class="el" href="captdns_8c_source.html#l00115">setn16()</a>, <a class="el" href="captdns_8c_source.html#l00122">setn32()</a>, <a class="el" href="user__interface_8h_source.html#l00335">SOFTAP_IF</a>, <a class="el" href="captdns_8c_source.html#l00170">strToLabel()</a>, <a class="el" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00106">espconn::udp</a>, and <a class="el" href="user__interface_8h.html#a70c442301412fe5d3711a8f0b8c7b7b5">wifi_get_ip_info()</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00344">captdnsInit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                                                                            {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">struct </span><a class="code" href="structespconn.html">espconn</a> *<a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>=(<span class="keyword">struct </span><a class="code" href="structespconn.html">espconn</a> *)arg;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="captdns_8c.html#a59c9a28ea1f015cff27b9d0c252d15f3">captdnsRecv</a>(<span class="keyword">struct</span> sockaddr_in *premote_addr, <span class="keywordtype">char</span> *pusrdata, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> length) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">char</span> buff[<a class="code" href="captdns_8c.html#a15a2237f736c340b151e2c5c957bccf9">DNS_LEN</a>];</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">char</span> reply[<a class="code" href="captdns_8c.html#a15a2237f736c340b151e2c5c957bccf9">DNS_LEN</a>];</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">char</span> *rend=&amp;reply[length];</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">char</span> *p=pusrdata;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a> *hdr=(<a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a>*)p;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a> *rhdr=(<a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a>*)&amp;reply[0];</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    p+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">//  httpd_printf(&quot;DNS packet: id 0x%X flags 0x%X rcode 0x%X qcnt %d ancnt %d nscount %d arcount %d len %d\n&quot;, </span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">//      my_ntohs(&amp;hdr-&gt;id), hdr-&gt;flags, hdr-&gt;rcode, my_ntohs(&amp;hdr-&gt;qdcount), my_ntohs(&amp;hdr-&gt;ancount), my_ntohs(&amp;hdr-&gt;nscount), my_ntohs(&amp;hdr-&gt;arcount), length);</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">//Some sanity checks:</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (length&gt;<a class="code" href="captdns_8c.html#a15a2237f736c340b151e2c5c957bccf9">DNS_LEN</a>) <span class="keywordflow">return</span>;                                 <span class="comment">//Packet is longer than DNS implementation allows</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (length&lt;<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a>)) <span class="keywordflow">return</span>;                       <span class="comment">//Packet is too short</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (hdr-&gt;ancount || hdr-&gt;nscount || hdr-&gt;arcount) <span class="keywordflow">return</span>;   <span class="comment">//this is a reply, don&#39;t know what to do with it</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (hdr-&gt;flags&amp;<a class="code" href="captdns_8c.html#acc6e2e07e082c775cd1efaf00bef4256">FLAG_TC</a>) <span class="keywordflow">return</span>;                             <span class="comment">//truncated, can&#39;t use this</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//Reply is basically the request plus the needed data</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="platform_8h.html#aeb7afd790e1a4e35c5cfd3129b053854">memcpy</a>(reply, pusrdata, length);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    rhdr-&gt;flags|=<a class="code" href="captdns_8c.html#a8e725ea85b752668819444c39e4f607c">FLAG_QR</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;hdr-&gt;qdcount); i++) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">//Grab the labels in the q string</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        p=<a class="code" href="captdns_8c.html#a1cda566d8dc5035086e911607e45820b">labelToStr</a>(pusrdata, p, length, buff, <span class="keyword">sizeof</span>(buff));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (p==<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="captdns_8c.html#a35a1b1d68789477988c78a6a94c7d52d">DnsQuestionFooter</a> *qf=(<a class="code" href="captdns_8c.html#a35a1b1d68789477988c78a6a94c7d52d">DnsQuestionFooter</a>*)p;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        p+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a35a1b1d68789477988c78a6a94c7d52d">DnsQuestionFooter</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">//      httpd_printf(&quot;DNS: Q (type 0x%X class 0x%X) for %s\n&quot;, my_ntohs(&amp;qf-&gt;type), my_ntohs(&amp;qf-&gt;class), buff);</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;qf-&gt;type)==<a class="code" href="captdns_8c.html#af2c396d095344cd7d0bee1734963f684">QTYPE_A</a>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="comment">//They want to know the IPv4 address of something.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">//Build the response.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            rend=<a class="code" href="captdns_8c.html#ab65a5932a7432c62e039b6366cedb733">strToLabel</a>(buff, rend, <span class="keyword">sizeof</span>(reply)-(rend-reply)); <span class="comment">//Add the label</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">if</span> (rend==<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *rf=(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *)rend;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            rend+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;type, <a class="code" href="captdns_8c.html#af2c396d095344cd7d0bee1734963f684">QTYPE_A</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;class, <a class="code" href="captdns_8c.html#abed8448821b2cf18800c02ae8b83d355">QCLASS_IN</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="captdns_8c.html#aad0e85473ca50e7bc9726c0e0314310f">setn32</a>(&amp;rf-&gt;ttl, 0);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;rdlength, 4); <span class="comment">//IPv4 addr is 4 bytes;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">//Grab the current IP of the softap interface</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keyword">struct </span><a class="code" href="structip__info.html">ip_info</a> info;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="user__interface_8h.html#a70c442301412fe5d3711a8f0b8c7b7b5">wifi_get_ip_info</a>(<a class="code" href="user__interface_8h.html#a351d2ec27d398c747bfdd0e3606a3989">SOFTAP_IF</a>, &amp;info);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            *rend++=<a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a32caf20405b8659c07758352746c4331">ip4_addr1</a>(&amp;info.ip);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            *rend++=<a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aee091caef24dd1705876bb8dbe28035c">ip4_addr2</a>(&amp;info.ip);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            *rend++=<a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aead691bee580ea8111b70e67cf971c40">ip4_addr3</a>(&amp;info.ip);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            *rend++=<a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a78cbf5c1fd832f909f755c4cc9036f02">ip4_addr4</a>(&amp;info.ip);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rhdr-&gt;ancount, <a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;rhdr-&gt;ancount)+1);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">//          httpd_printf(&quot;Added A rec to resp. Resp len is %d\n&quot;, (rend-reply));</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;qf-&gt;type)==<a class="code" href="captdns_8c.html#a8003df31e26989c5ab40dff7fc601a58">QTYPE_NS</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">//Give ns server. Basically can be whatever we want because it&#39;ll get resolved to our IP later anyway.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            rend=<a class="code" href="captdns_8c.html#ab65a5932a7432c62e039b6366cedb733">strToLabel</a>(buff, rend, <span class="keyword">sizeof</span>(reply)-(rend-reply)); <span class="comment">//Add the label</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *rf=(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *)rend;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            rend+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;type, <a class="code" href="captdns_8c.html#a8003df31e26989c5ab40dff7fc601a58">QTYPE_NS</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;class, <a class="code" href="captdns_8c.html#abed8448821b2cf18800c02ae8b83d355">QCLASS_IN</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;ttl, 0);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;rdlength, 4);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            *rend++=2;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            *rend++=<span class="charliteral">&#39;n&#39;</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            *rend++=<span class="charliteral">&#39;s&#39;</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            *rend++=0;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rhdr-&gt;ancount, <a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;rhdr-&gt;ancount)+1);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//          httpd_printf(&quot;Added NS rec to resp. Resp len is %d\n&quot;, (rend-reply));</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;qf-&gt;type)==<a class="code" href="captdns_8c.html#aae80a81f2eb30f1597242691063bad1a">QTYPE_URI</a>) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="comment">//Give uri to us</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            rend=<a class="code" href="captdns_8c.html#ab65a5932a7432c62e039b6366cedb733">strToLabel</a>(buff, rend, <span class="keyword">sizeof</span>(reply)-(rend-reply)); <span class="comment">//Add the label</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *rf=(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a> *)rend;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            rend+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="captdns_8c.html#ada743c33a17ed7ef8a1fa6eb02a7a64e">DnsUriHdr</a> *uh=(<a class="code" href="captdns_8c.html#ada743c33a17ed7ef8a1fa6eb02a7a64e">DnsUriHdr</a> *)rend;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            rend+=<span class="keyword">sizeof</span>(<a class="code" href="captdns_8c.html#ada743c33a17ed7ef8a1fa6eb02a7a64e">DnsUriHdr</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;type, <a class="code" href="captdns_8c.html#aae80a81f2eb30f1597242691063bad1a">QTYPE_URI</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;class, <a class="code" href="captdns_8c.html#a280f4d6e370c73348083cc62a04e90cb">QCLASS_URI</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;ttl, 0);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rf-&gt;rdlength, 4+16);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;uh-&gt;prio, 10);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;uh-&gt;weight, 1);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <a class="code" href="platform_8h.html#aeb7afd790e1a4e35c5cfd3129b053854">memcpy</a>(rend, <span class="stringliteral">&quot;http://esp.nonet&quot;</span>, 16);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            rend+=16;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a>(&amp;rhdr-&gt;ancount, <a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(&amp;rhdr-&gt;ancount)+1);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">//          httpd_printf(&quot;Added NS rec to resp. Resp len is %d\n&quot;, (rend-reply));</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//Send the response</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#ifndef FREERTOS</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="struct__remot__info.html">remot_info</a> *remInfo=<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">//Send data to port/ip it came from, not to the ip/port we listen on.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a95deabffd3b8a4bec81f91596901f84d">espconn_get_connection_info</a>(conn, &amp;remInfo, 0)==<a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a0149e7f6afdf2a5aef57e1fbe19c0b65">ESPCONN_OK</a>) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        conn-&gt;<a class="code" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">proto</a>.<a class="code" href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">udp</a>-&gt;<a class="code" href="struct__esp__udp.html#ac8342d90f426d0ff9bbc1c8be704eaa0">remote_port</a>=remInfo-&gt;<a class="code" href="struct__remot__info.html#a4be9e038cc9f63448e8b73c72f09bf7c">remote_port</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="platform_8h.html#aeb7afd790e1a4e35c5cfd3129b053854">memcpy</a>(conn-&gt;<a class="code" href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">proto</a>.<a class="code" href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">udp</a>-&gt;<a class="code" href="struct__esp__udp.html#a7911ab1f00d2fcd5a9b7f5c7e0d62f5f">remote_ip</a>, remInfo-&gt;<a class="code" href="struct__remot__info.html#a0077c44df09f16621b948f892591cd3a">remote_ip</a>, <span class="keyword">sizeof</span>(remInfo-&gt;<a class="code" href="struct__remot__info.html#a0077c44df09f16621b948f892591cd3a">remote_ip</a>));</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="espconn_8c.html#aa1c02dfd9f8d5f1a385eb847cb93f9e5">espconn_sendto</a>(conn, (<a class="code" href="c__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>*)reply, rend-reply);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    sendto(sockFd,(<a class="code" href="c__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>*)reply, rend-reply, 0, (<span class="keyword">struct</span> sockaddr *)premote_addr, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="ttc" id="structip__info_html"><div class="ttname"><a href="structip__info.html">ip_info</a></div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00247">ip_addr.h:247</a></div></div>
<div class="ttc" id="structespconn_html_abf373d8dd0448b17e6062f2b3c0a4677"><div class="ttname"><a href="structespconn.html#abf373d8dd0448b17e6062f2b3c0a4677">espconn::udp</a></div><div class="ttdeci">esp_udp * udp</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00106">espconn.h:106</a></div></div>
<div class="ttc" id="user__interface_8h_html_a351d2ec27d398c747bfdd0e3606a3989"><div class="ttname"><a href="user__interface_8h.html#a351d2ec27d398c747bfdd0e3606a3989">SOFTAP_IF</a></div><div class="ttdeci">#define SOFTAP_IF</div><div class="ttdef"><b>Definition:</b> <a href="user__interface_8h_source.html#l00335">user_interface.h:335</a></div></div>
<div class="ttc" id="captdns_8c_html_aad0e85473ca50e7bc9726c0e0314310f"><div class="ttname"><a href="captdns_8c.html#aad0e85473ca50e7bc9726c0e0314310f">setn32</a></div><div class="ttdeci">static void ICACHE_FLASH_ATTR setn32(void *pp, int32_t n)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00122">captdns.c:122</a></div></div>
<div class="ttc" id="captdns_8c_html_a43123036321354db8c5a5ee5eb3e19a2"><div class="ttname"><a href="captdns_8c.html#a43123036321354db8c5a5ee5eb3e19a2">DnsHeader</a></div><div class="ttdeci">DnsHeader</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00061">captdns.c:61</a></div></div>
<div class="ttc" id="captdns_8c_html_a8ac405da3aa7e2e078859dd8214cc5a1"><div class="ttname"><a href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a></div><div class="ttdeci">static struct espconn conn</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00050">captdns.c:50</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_a95deabffd3b8a4bec81f91596901f84d"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a95deabffd3b8a4bec81f91596901f84d">espconn_get_connection_info</a></div><div class="ttdeci">sint8 espconn_get_connection_info(struct espconn *pespconn, remot_info **pcon_info, uint8 typeflags)</div><div class="ttdef"><b>Definition:</b> <a href="espconn_8c_source.html#l00825">espconn.c:825</a></div></div>
<div class="ttc" id="def_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00047">def.h:47</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_a0149e7f6afdf2a5aef57e1fbe19c0b65"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a0149e7f6afdf2a5aef57e1fbe19c0b65">ESPCONN_OK</a></div><div class="ttdeci">#define ESPCONN_OK</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00020">espconn.h:20</a></div></div>
<div class="ttc" id="c__types_8h_html_afebd45c0d36db732504450393777ce5c"><div class="ttname"><a href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a></div><div class="ttdeci">#define ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="c__types_8h_source.html#l00099">c_types.h:99</a></div></div>
<div class="ttc" id="captdns_8c_html_acc6e2e07e082c775cd1efaf00bef4256"><div class="ttname"><a href="captdns_8c.html#acc6e2e07e082c775cd1efaf00bef4256">FLAG_TC</a></div><div class="ttdeci">#define FLAG_TC</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00094">captdns.c:94</a></div></div>
<div class="ttc" id="user__interface_8h_html_a70c442301412fe5d3711a8f0b8c7b7b5"><div class="ttname"><a href="user__interface_8h.html#a70c442301412fe5d3711a8f0b8c7b7b5">wifi_get_ip_info</a></div><div class="ttdeci">bool wifi_get_ip_info(uint8 if_index, struct ip_info *info)</div></div>
<div class="ttc" id="struct__remot__info_html"><div class="ttname"><a href="struct__remot__info.html">_remot_info</a></div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00088">espconn.h:88</a></div></div>
<div class="ttc" id="captdns_8c_html_a8e725ea85b752668819444c39e4f607c"><div class="ttname"><a href="captdns_8c.html#a8e725ea85b752668819444c39e4f607c">FLAG_QR</a></div><div class="ttdeci">#define FLAG_QR</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00092">captdns.c:92</a></div></div>
<div class="ttc" id="struct__remot__info_html_a0077c44df09f16621b948f892591cd3a"><div class="ttname"><a href="struct__remot__info.html#a0077c44df09f16621b948f892591cd3a">_remot_info::remote_ip</a></div><div class="ttdeci">uint8 remote_ip[4]</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00091">espconn.h:91</a></div></div>
<div class="ttc" id="captdns_8c_html_a2b9dc30f1b5c34d34788f966f8baf579"><div class="ttname"><a href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a></div><div class="ttdeci">static uint16_t ICACHE_FLASH_ATTR my_ntohs(uint16_t *in)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00130">captdns.c:130</a></div></div>
<div class="ttc" id="captdns_8c_html_abed8448821b2cf18800c02ae8b83d355"><div class="ttname"><a href="captdns_8c.html#abed8448821b2cf18800c02ae8b83d355">QCLASS_IN</a></div><div class="ttdeci">#define QCLASS_IN</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00109">captdns.c:109</a></div></div>
<div class="ttc" id="captdns_8c_html_ab65a5932a7432c62e039b6366cedb733"><div class="ttname"><a href="captdns_8c.html#ab65a5932a7432c62e039b6366cedb733">strToLabel</a></div><div class="ttdeci">static char ICACHE_FLASH_ATTR * strToLabel(char *str, char *label, int maxLen)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00170">captdns.c:170</a></div></div>
<div class="ttc" id="captdns_8c_html_a3b65a462da5bbfc4c310605b66952949"><div class="ttname"><a href="captdns_8c.html#a3b65a462da5bbfc4c310605b66952949">setn16</a></div><div class="ttdeci">static void ICACHE_FLASH_ATTR setn16(void *pp, int16_t n)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00115">captdns.c:115</a></div></div>
<div class="ttc" id="captdns_8c_html_aae80a81f2eb30f1597242691063bad1a"><div class="ttname"><a href="captdns_8c.html#aae80a81f2eb30f1597242691063bad1a">QTYPE_URI</a></div><div class="ttdeci">#define QTYPE_URI</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00107">captdns.c:107</a></div></div>
<div class="ttc" id="captdns_8c_html_a1cda566d8dc5035086e911607e45820b"><div class="ttname"><a href="captdns_8c.html#a1cda566d8dc5035086e911607e45820b">labelToStr</a></div><div class="ttdeci">static char *ICACHE_FLASH_ATTR labelToStr(char *packet, char *labelPtr, int packetSz, char *res, int resMaxLen)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00138">captdns.c:138</a></div></div>
<div class="ttc" id="captdns_8c_html_a280f4d6e370c73348083cc62a04e90cb"><div class="ttname"><a href="captdns_8c.html#a280f4d6e370c73348083cc62a04e90cb">QCLASS_URI</a></div><div class="ttdeci">#define QCLASS_URI</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00111">captdns.c:111</a></div></div>
<div class="ttc" id="c__types_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="c__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdef"><b>Definition:</b> <a href="c__types_8h_source.html#l00045">c_types.h:45</a></div></div>
<div class="ttc" id="captdns_8c_html_ada743c33a17ed7ef8a1fa6eb02a7a64e"><div class="ttname"><a href="captdns_8c.html#ada743c33a17ed7ef8a1fa6eb02a7a64e">DnsUriHdr</a></div><div class="ttdeci">DnsUriHdr</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00089">captdns.c:89</a></div></div>
<div class="ttc" id="struct__esp__udp_html_ac8342d90f426d0ff9bbc1c8be704eaa0"><div class="ttname"><a href="struct__esp__udp.html#ac8342d90f426d0ff9bbc1c8be704eaa0">_esp_udp::remote_port</a></div><div class="ttdeci">int remote_port</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00082">espconn.h:82</a></div></div>
<div class="ttc" id="captdns_8c_html_a15a2237f736c340b151e2c5c957bccf9"><div class="ttname"><a href="captdns_8c.html#a15a2237f736c340b151e2c5c957bccf9">DNS_LEN</a></div><div class="ttdeci">#define DNS_LEN</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00047">captdns.c:47</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_aead691bee580ea8111b70e67cf971c40"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aead691bee580ea8111b70e67cf971c40">ip4_addr3</a></div><div class="ttdeci">#define ip4_addr3(ipaddr)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00222">ip_addr.h:222</a></div></div>
<div class="ttc" id="captdns_8c_html_af2c396d095344cd7d0bee1734963f684"><div class="ttname"><a href="captdns_8c.html#af2c396d095344cd7d0bee1734963f684">QTYPE_A</a></div><div class="ttdeci">#define QTYPE_A</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00097">captdns.c:97</a></div></div>
<div class="ttc" id="structespconn_html_ae43b13bd2d8ff1c2b067caad001e5cc8"><div class="ttname"><a href="structespconn.html#ae43b13bd2d8ff1c2b067caad001e5cc8">espconn::proto</a></div><div class="ttdeci">union espconn::@1 proto</div></div>
<div class="ttc" id="structespconn_html"><div class="ttname"><a href="structespconn.html">espconn</a></div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00099">espconn.h:99</a></div></div>
<div class="ttc" id="espconn_8c_html_aa1c02dfd9f8d5f1a385eb847cb93f9e5"><div class="ttname"><a href="espconn_8c.html#aa1c02dfd9f8d5f1a385eb847cb93f9e5">espconn_sendto</a></div><div class="ttdeci">sint16 ICACHE_FLASH_ATTR espconn_sendto(struct espconn *espconn, uint8 *psent, uint16 length)</div><div class="ttdef"><b>Definition:</b> <a href="espconn_8c_source.html#l00448">espconn.c:448</a></div></div>
<div class="ttc" id="captdns_8c_html_a8003df31e26989c5ab40dff7fc601a58"><div class="ttname"><a href="captdns_8c.html#a8003df31e26989c5ab40dff7fc601a58">QTYPE_NS</a></div><div class="ttdeci">#define QTYPE_NS</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00098">captdns.c:98</a></div></div>
<div class="ttc" id="struct__esp__udp_html_a7911ab1f00d2fcd5a9b7f5c7e0d62f5f"><div class="ttname"><a href="struct__esp__udp.html#a7911ab1f00d2fcd5a9b7f5c7e0d62f5f">_esp_udp::remote_ip</a></div><div class="ttdeci">uint8 remote_ip[4]</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00085">espconn.h:85</a></div></div>
<div class="ttc" id="captdns_8c_html_a69e8eb62bae268243c6a1b277d19394c"><div class="ttname"><a href="captdns_8c.html#a69e8eb62bae268243c6a1b277d19394c">DnsResourceFooter</a></div><div class="ttdeci">DnsResourceFooter</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00084">captdns.c:84</a></div></div>
<div class="ttc" id="platform_8h_html_aeb7afd790e1a4e35c5cfd3129b053854"><div class="ttname"><a href="platform_8h.html#aeb7afd790e1a4e35c5cfd3129b053854">memcpy</a></div><div class="ttdeci">#define memcpy(x, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="platform_8h_source.html#l00022">platform.h:22</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_aee091caef24dd1705876bb8dbe28035c"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aee091caef24dd1705876bb8dbe28035c">ip4_addr2</a></div><div class="ttdeci">#define ip4_addr2(ipaddr)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00221">ip_addr.h:221</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_a78cbf5c1fd832f909f755c4cc9036f02"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a78cbf5c1fd832f909f755c4cc9036f02">ip4_addr4</a></div><div class="ttdeci">#define ip4_addr4(ipaddr)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00223">ip_addr.h:223</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_a32caf20405b8659c07758352746c4331"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a32caf20405b8659c07758352746c4331">ip4_addr1</a></div><div class="ttdeci">#define ip4_addr1(ipaddr)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00220">ip_addr.h:220</a></div></div>
<div class="ttc" id="captdns_8c_html_a35a1b1d68789477988c78a6a94c7d52d"><div class="ttname"><a href="captdns_8c.html#a35a1b1d68789477988c78a6a94c7d52d">DnsQuestionFooter</a></div><div class="ttdeci">DnsQuestionFooter</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00074">captdns.c:74</a></div></div>
<div class="ttc" id="struct__remot__info_html_a4be9e038cc9f63448e8b73c72f09bf7c"><div class="ttname"><a href="struct__remot__info.html#a4be9e038cc9f63448e8b73c72f09bf7c">_remot_info::remote_port</a></div><div class="ttdeci">int remote_port</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h_source.html#l00090">espconn.h:90</a></div></div>
<div class="ttc" id="captdns_8c_html_a59c9a28ea1f015cff27b9d0c252d15f3"><div class="ttname"><a href="captdns_8c.html#a59c9a28ea1f015cff27b9d0c252d15f3">captdnsRecv</a></div><div class="ttdeci">static void ICACHE_FLASH_ATTR captdnsRecv(void *arg, char *pusrdata, unsigned short length)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00192">captdns.c:192</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a59c9a28ea1f015cff27b9d0c252d15f3_cgraph.svg" width="1603" height="531"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a59c9a28ea1f015cff27b9d0c252d15f3_icgraph.svg" width="244" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa94930b306da4c43c4325612a8a538db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa94930b306da4c43c4325612a8a538db">&#9670;&nbsp;</a></span>captdnsStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> captdnsStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00353">353</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">References <a class="el" href="espconn_8c_source.html#l01217">espconn_delete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                         {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a63d15dda14dfcd8da278c31f048910c3">espconn_delete</a>(&amp;<a class="code" href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="ttc" id="captdns_8c_html_a8ac405da3aa7e2e078859dd8214cc5a1"><div class="ttname"><a href="captdns_8c.html#a8ac405da3aa7e2e078859dd8214cc5a1">conn</a></div><div class="ttdeci">static struct espconn conn</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00050">captdns.c:50</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2app_2espconn_8h_html_a63d15dda14dfcd8da278c31f048910c3"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2app_2espconn_8h.html#a63d15dda14dfcd8da278c31f048910c3">espconn_delete</a></div><div class="ttdeci">sint8 espconn_delete(struct espconn *espconn)</div><div class="ttdef"><b>Definition:</b> <a href="espconn_8c_source.html#l01217">espconn.c:1217</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_aa94930b306da4c43c4325612a8a538db_cgraph.svg" width="271" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1cda566d8dc5035086e911607e45820b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cda566d8dc5035086e911607e45820b">&#9670;&nbsp;</a></span>labelToStr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> labelToStr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>labelPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetSz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resMaxLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00138">138</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">References <a class="el" href="captdns_8c_source.html#l00130">my_ntohs()</a>, and <a class="el" href="def_8h_source.html#l00047">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                                                                                {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> i, j, k;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">char</span> *endPtr=<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    i=0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">if</span> ((*labelPtr&amp;0xC0)==0) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            j=*labelPtr++; <span class="comment">//skip past length</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="comment">//Add separator period if there already is data in res</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> (i&lt;resMaxLen &amp;&amp; i!=0) res[i++]=<span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="comment">//Copy label to res</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">for</span> (k=0; k&lt;j; k++) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">if</span> ((labelPtr-packet)&gt;packetSz) <span class="keywordflow">return</span> <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">if</span> (i&lt;resMaxLen) res[i++]=*labelPtr++;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*labelPtr&amp;0xC0)==0xC0) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="comment">//Compressed label pointer</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            endPtr=labelPtr+2;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordtype">int</span> offset=<a class="code" href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a>(((uint16_t *)labelPtr))&amp;0x3FFF;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="comment">//Check if offset points to somewhere outside of the packet</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (offset&gt;packetSz) <span class="keywordflow">return</span> <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            labelPtr=&amp;packet[offset];</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">//check for out-of-bound-ness</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> ((labelPtr-packet)&gt;packetSz) <span class="keywordflow">return</span> <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    } <span class="keywordflow">while</span> (*labelPtr!=0);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    res[i]=0; <span class="comment">//zero-terminate</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (endPtr==<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) endPtr=labelPtr+1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> endPtr;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="def_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00047">def.h:47</a></div></div>
<div class="ttc" id="captdns_8c_html_a2b9dc30f1b5c34d34788f966f8baf579"><div class="ttname"><a href="captdns_8c.html#a2b9dc30f1b5c34d34788f966f8baf579">my_ntohs</a></div><div class="ttdeci">static uint16_t ICACHE_FLASH_ATTR my_ntohs(uint16_t *in)</div><div class="ttdef"><b>Definition:</b> <a href="captdns_8c_source.html#l00130">captdns.c:130</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a1cda566d8dc5035086e911607e45820b_cgraph.svg" width="222" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a1cda566d8dc5035086e911607e45820b_icgraph.svg" width="375" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2b9dc30f1b5c34d34788f966f8baf579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9dc30f1b5c34d34788f966f8baf579">&#9670;&nbsp;</a></span>my_ntohs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> my_ntohs </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00130">130</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>, and <a class="el" href="captdns_8c_source.html#l00138">labelToStr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                         {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">char</span> *p=(<span class="keywordtype">char</span>*)in;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> ((p[0]&lt;&lt;8)&amp;0xff00)|(p[1]&amp;0xff);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div></div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a2b9dc30f1b5c34d34788f966f8baf579_icgraph.svg" width="503" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3b65a462da5bbfc4c310605b66952949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b65a462da5bbfc4c310605b66952949">&#9670;&nbsp;</a></span>setn16()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> setn16 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00115">115</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                          {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">char</span> *p=pp;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    *p++=(n&gt;&gt;8);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    *p++=(n&amp;0xff);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div></div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_a3b65a462da5bbfc4c310605b66952949_icgraph.svg" width="355" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aad0e85473ca50e7bc9726c0e0314310f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0e85473ca50e7bc9726c0e0314310f">&#9670;&nbsp;</a></span>setn32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> setn32 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00122">122</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                                          {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">char</span> *p=pp;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    *p++=(n&gt;&gt;24)&amp;0xff;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    *p++=(n&gt;&gt;16)&amp;0xff;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    *p++=(n&gt;&gt;8)&amp;0xff;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    *p++=(n&amp;0xff);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div></div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_aad0e85473ca50e7bc9726c0e0314310f_icgraph.svg" width="355" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab65a5932a7432c62e039b6366cedb733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab65a5932a7432c62e039b6366cedb733">&#9670;&nbsp;</a></span>strToLabel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char <a class="el" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a>* strToLabel </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00170">170</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                                              {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">char</span> *len=label; <span class="comment">//ptr to len byte</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">char</span> *p=label+1; <span class="comment">//ptr to next label byte to be written</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (*str==<span class="charliteral">&#39;.&#39;</span> || *str==0) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            *len=((p-len)-1);   <span class="comment">//write len of label bit</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            len=p;              <span class="comment">//pos of len for next part</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            p++;                <span class="comment">//data ptr is one past len</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (*str==0) <span class="keywordflow">break</span>; <span class="comment">//done</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            str++;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            *p++=*str++;    <span class="comment">//copy byte</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//          if ((p-label)&gt;maxLen) return NULL;  //check out of bounds</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    *len=0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> p; <span class="comment">//ptr to first free byte in resp</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div></div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="captdns_8c_ab65a5932a7432c62e039b6366cedb733_icgraph.svg" width="378" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8ac405da3aa7e2e078859dd8214cc5a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac405da3aa7e2e078859dd8214cc5a1">&#9670;&nbsp;</a></span>conn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structespconn.html">espconn</a> conn</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00050">50</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>, <a class="el" href="httpd_8c_source.html#l00483">httpdConnectCb()</a>, <a class="el" href="httpd_8c_source.html#l00454">httpdDisconCb()</a>, <a class="el" href="httpd_8c_source.html#l00107">httpdFindConnData()</a>, <a class="el" href="httpd_8c_source.html#l00446">httpdReconCb()</a>, <a class="el" href="httpd_8c_source.html#l00394">httpdRecvCb()</a>, and <a class="el" href="httpd_8c_source.html#l00290">httpdSentCb()</a>.</p>

</div>
</div>
<a id="a43123036321354db8c5a5ee5eb3e19a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43123036321354db8c5a5ee5eb3e19a2">&#9670;&nbsp;</a></span>DnsHeader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DnsHeader</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00061">61</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a3c5913789c2f46752baa880646bba11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c5913789c2f46752baa880646bba11d">&#9670;&nbsp;</a></span>DnsLabel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DnsLabel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00067">67</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

</div>
</div>
<a id="a35a1b1d68789477988c78a6a94c7d52d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a1b1d68789477988c78a6a94c7d52d">&#9670;&nbsp;</a></span>DnsQuestionFooter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DnsQuestionFooter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00074">74</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="a69e8eb62bae268243c6a1b277d19394c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e8eb62bae268243c6a1b277d19394c">&#9670;&nbsp;</a></span>DnsResourceFooter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DnsResourceFooter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00084">84</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
<a id="ada743c33a17ed7ef8a1fa6eb02a7a64e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada743c33a17ed7ef8a1fa6eb02a7a64e">&#9670;&nbsp;</a></span>DnsUriHdr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DnsUriHdr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="captdns_8c_source.html#l00089">89</a> of file <a class="el" href="captdns_8c_source.html">captdns.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="captdns_8c_source.html#l00192">captdnsRecv()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
