<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeterLogger: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MeterLogger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_meter_logger_2_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# MeterLogger</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;MeterLogger is a custom daughterboard you can insert in Kamstrup Meters and get them to transmit their samples </div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;to a remote MQTT server.</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;MeterLogger is part of the [**Nabovarme**](https://github.com/nabovarme) orgnaization.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;Check out the [WIKI](https://github.com/nabovarme/MeterLogger/wiki) for more details!</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;## Build details</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;To build and flash for KMP type meter (Multical 601):  </div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;```  </div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;KEY=ef500c9268cf749016d26d6cbfaaf7bf make clean all flashall  </div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;```  </div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  </div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;To build and flash for en61107, sub type Multical 66 C:  </div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;```  </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;EN61107=1 KEY=ef500c9268cf749016d26d6cbfaaf7bf make clean all flashall  </div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;```  </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;To build and flash for en61107, sub type Multical 66 B:  </div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;```  </div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;MC_66B=1 KEY=ef500c9268cf749016d26d6cbfaaf7bf make clean all flashall  </div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;```  </div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  </div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;To build and flash for KMP/en61107 type, forced as flow meter:  </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;```  </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;FLOW_METER=1 KEY=ef500c9268cf749016d26d6cbfaaf7bf make clean all flashall  </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;```  </div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  </div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;To build and flash for impulse based electricity meter:  </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;```  </div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;IMPULSE=1 KEY=ef500c9268cf749016d26d6cbfaaf7bf make clean all flashall  </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;```  </div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  </div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;To configure wireless network:  </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;```  </div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;SERIAL=9999999 KEY=ef500c9268cf749016d26d6cbfaaf7bf make wifisetup  </div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;```  </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;**BUILD OPTIONS**  </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;DEBUG=1  </div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;enable serial debugging  </div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  </div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;DEBUG_NO_METER=1  </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;dont wait for meter to answer  </div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;DEBUG_SHORT_WEB_CONFIG_TIME=1  </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;dont wait for web config  </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  </div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;IMPULSE=1  </div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;meter type is impulse based (100 mS)  </div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;EN61107=0  </div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;meter type is KMP (Multical 601)  </div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;EN61107=1  </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;meter type is en61107, sub type Multical 66 C  </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;MC_66B=1  </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;meter type is en61107, sub type Multical 66 B  </div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;FLOW_METER=1  </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;meter is forced to run as a flow meter and close when volume is reached  </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  </div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;AUTO_CLOSE=1  </div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;automatically check if energy is larger than the value set by open_until mqtt command </div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  </div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;DEBUG_STACK_TRACE=1  </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Enable exception stack trace dump at to flash at address STACK_TRACE_SEC * SPI_FLASH_SEC_SIZE (0x80000), STACK_TRACE_N bytes  </div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;NO_CRON=1  </div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;disable cron stuff and save 2688 bytes of RAM. Reconfiguration is needed after changing this  </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;THERMO_NO=0  </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;thermo actuator is normal closed  </div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;THERMO_NO=1  </div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;thermo actuator is normal open  </div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;THERMO_ON_AC_2  </div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;thermo actuator connected on ac 2  </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;LED_ON_AC=1  </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;use led to indicate ac state  </div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;SERIAL=9999999  </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;serial number for meter used for device&#39;s SSID: IMPULSE meters EL_9999999 and other Kamstrup meters KAM_9999999. Used in make wifisetup target and if DEBUG_NO_METER=1 </div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;KEY=ef500c9268cf749016d26d6cbfaaf7bf</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;master key for crypto, 16 bytes</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;First 8 bytes hex encoded (ef500c9268cf7490) is wifi setup password. Master key is sha256 hashed to 32 bit and first 16 bytes is aes key and last 16 bytes is hmac sha256 key.</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;```  </div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;master key                            wifi key (first 16 bytes)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;+--------------------------------+    +----------------+</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;|ef500c9268cf749016d26d6cbfaaf7bf| -&gt; |ef500c9268cf7490| </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;+--------------------------------+    +----------------+</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                |</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          [sha256 hash]</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                |</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                v</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;+----------------------------------------------------------------+</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;|89a5d4f82ad86bc9ec27427e246fd15481663afea8c463d93cc93c967c9b31be|</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;+----------------------------------------------------------------+</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                |                                        |</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;aes key         v                   hmac sha256 key      v</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;+--------------------------------+  +--------------------------------+</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;|89a5d4f82ad86bc9ec27427e246fd154|  |81663afea8c463d93cc93c967c9b31be|</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;+--------------------------------+  +--------------------------------+</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;```  </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;Crypto is applies on mqtt packages like this:</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;1) at 32 bytes offset in mqtt_message contains IV, 16 bytes random bytes used for AES128 CBC encryption.</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;2) cleartext (0-terminated) is AES128 CBC encrypted, with aes key and IV. Result is written to mqtt_message at 32 + 16 bytes offset (binary data not 0-terminated).</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;3) HMAC SHA256 checksum is calculated on topic + IV + encrypted data and written to first 32 bytes.</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;```  </div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;hmac sha256                                                       IV                               encrypted data</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;+----------------------------------------------------------------+--------------------------------+------------------------------------+</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;|b218d7ec2f7977c942b5bf16d535de3cb5f0e012638148e5a7fc6e09efe440a7|54cd3d04f024e7e5c4876248cc146c41|9616bb291182861b7a5ea238a0c267115...|</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;+--------------------------------------------------------------------------------------------------------------------------------------+</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;IV</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;+--------------------------------+</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;|54cd3d04f024e7e5c4876248cc146c41| </div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;+--------------------------------+</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;cleartext message (null terminated)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;+-----------------------------------------------------------------------------------------------------------------+</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;|heap=21376&amp;t1=23.61 C&amp;t2=22.19 C&amp;tdif=1.42 K&amp;flow1=0 l/h&amp;effect1=0.0 kW&amp;hr=73327 h&amp;v1=1321.27 m3&amp;e1=56.726 MWh&amp;\0|</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;+-----------------------------------------------------------------------------------------------------------------+</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;+</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;hmac sha256 key</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;```  </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;**MQTT format for messages sent _to_ meter**  </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;| Topic                                                  | Message                                                                                             |</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;| :----------------------------------------------------- | :-------------------------------------------------------------------------------------------------- |</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;| /config/v2/9999999/[unix time]/ping                    |                                                                                                     |</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;| /config/v2/9999999/[unix time]/open                    | [unix time]                                                                                         |</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;| /config/v2/9999999/[unix time]/open_until              | [kWh when meter should close (only write to flash if changed and not negative value)]               |</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;| /config/v2/9999999/[unix time]/open_until_delta        | [[kWh when meter should close as delta (only write to flash if changed and not negative value)]     |</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;| /config/v2/9999999/[unix time]/close                   | [unix time]                                                                                         |</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;| /config/v2/9999999/[unix time]/status                  |                                                                                                     |</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;| /config/v2/9999999/[unix time]/set_cron                | minute=30&amp;hour=*&amp;day_of_month=*&amp;month=*&amp;day_of_week=*&amp;command=open                                  |</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;| /config/v2/9999999/[unix time]/set_cron                | minute=30&amp;hour=*&amp;day_of_month=*&amp;month=*&amp;day_of_week=*&amp;command=close                                 |</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;| /config/v2/9999999/[unix time]/set_cron                | minute=30&amp;hour=*&amp;day_of_month=*&amp;month=*&amp;day_of_week=*&amp;command=set_ssid_pwd=ssid=the_ssid&amp;pwd=secret |</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;| /config/v2/9999999/[unix time]/set_cron                | minute=30&amp;hour=*&amp;day_of_month=*&amp;month=*&amp;day_of_week=*&amp;command=clear_cron                            |</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;| /config/v2/9999999/[unix time]/cron                    |                                                                                                     |</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;| /config/v2/9999999/[unix time]/clear_cron              | [unix time]                                                                                         |</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;| /config/v2/9999999/[unix time]/ping                    |                                                                                                     |</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;| /config/v2/9999999/[unix time]/version                 |                                                                                                     |</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;| /config/v2/9999999/[unix time]/uptime                  |                                                                                                     |</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;| /config/v2/9999999/[unix time]/stack_trace             | [enable stack trace dumps until restart i.e. once (only if built with DEBUG_STACK_TRACE=1)]         |</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;| /config/v2/9999999/[unix time]/vdd                     |                                                                                                     |</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;| /config/v2/9999999/[unix time]/rssi                    |                                                                                                     |</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;| /config/v2/9999999/[unix time]/ssid                    |                                                                                                     |</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;| /config/v2/9999999/[unix time]/scan                    |                                                                                                     |</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;| /config/v2/9999999/[unix time]/set_ssid                | [ssid]                                                                                              |</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;| /config/v2/9999999/[unix time]/set_pwd                 | [pwd]                                                                                               |</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;| /config/v2/9999999/[unix time]/set_ssid_pwd            | [ssid=name&amp;pwd=secret]                                                                              |</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;| /config/v2/9999999/[unix time]/wifi_status             |                                                                                                     |</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;| /config/v2/9999999/[unix time]/start_ap                | [start ap + save to flash if changed]                                                               |</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;| /config/v2/9999999/[unix time]/stop_ap                 | [stop ap + save to flash if changed]                                                                |</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;| /config/v2/9999999/[unix time]/ap_status               |                                                                                                     |</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;| /config/v2/9999999/[unix time]/reconnect               |                                                                                                     |</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;| /config/v2/9999999/[unix time]/save (only pulse meter) |                                                                                                     |</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;| /config/v2/9999999/[unix time]/mem                     |                                                                                                     |</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;| /config/v2/9999999/[unix time]/reset_reason            |                                                                                                     |</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;| /config/v2/9999999/[unix time]/restart                 |                                                                                                     |</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  </div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;**MQTT format for messages sent _from_ meter**  </div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;| Topic                                           | Message                                                                                              |</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;| :---------------------------------------------- | :--------------------------------------------------------------------------------------------------- |</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;| /sample/v2/9999999/[unix time]                  | heap=20000&amp;t1=25.00 C&amp;t2=15.00 C&amp;tdif=10.00 K&amp;flow1=0 l/h&amp;effect1=0.0 kW&amp;hr=0 h&amp;v1=0.00 m3&amp;e1=0 kWh&amp; |</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;| /cron/v2/9999999/[unix time]                    | 12                                                                                                   |</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;| /ping/v2/9999999/[unix time]                    |                                                                                                      |</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;| /version/v2/9999999/[unix time]                 | [sdk version]-[git version]                                                                          |</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;| /status/v2/9999999/[unix time]                  | [open|close]                                                                                         |</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;| /open_until/v2/9999999/[unix time]              | [kWh when meter should close]                                                                        |</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;| /open_until_delta/v2/9999999/[unix time]        | [kWh when meter should close]                                                                        |</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;| /uptime/v2/9999999/[unix time]                  | [uptime in seconds]                                                                                  |</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;| /stack_trace/v2/9999999/[unix time]             |                                                                                                      |</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;| /vdd/v2/9999999/[unix time]                     | [power supply voltage level]                                                                         |</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;| /rssi/v2/9999999/[unix time]                    | [rssi of the wifi it is connected to (in dBm, 31 if fail)]                                           |</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;| /ssid/v2/9999999/[unix time]                    | [ssid of the wifi it is connected to]                                                                |</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;| /set_ssid/v2/9999999/[unix time]                | [ssid of the wifi it is set to connect to]                                                           |</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;| /set_pwd/v2/9999999/[unix time]                 | [password for the wifi it is set to connect to]                                                      |</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;| /set_ssid_pwd/v2/9999999/[unix time]            | [combined ssid and password for the wifi it is set to connect to]                                    |</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;| /scan_result/v2/9999999/[unix time]             | [ssid=Loppen Public&amp;rssi=-51&amp;channel=11]                                                             |</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;| /wifi_status/v2/9999999/[unix time]             | [connected or disconnected]                                                                          |</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;| /ap_status/v2/9999999/[unix time]               | [started or stopped]                                                                                 |</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;| /save/v2/9999999/[unix time] (only pulse meter) | saved                                                                                                |</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;| /mem/v2/9999999/[unix time]                     | heap=9672                                                                                            |</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;| /reset_reason/v2/9999999/[unix time]            |                                                                                                      |</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
