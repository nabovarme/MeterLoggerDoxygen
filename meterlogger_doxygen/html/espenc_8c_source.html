<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeterLogger: esp-open-lwip/lwip/netif/espenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MeterLogger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_84d76a54d5d264f7baa245697b2fd85c.html">esp-open-lwip</a></li><li class="navelem"><a class="el" href="dir_5e0166fd2fe4b02c0adc1ba718d54e45.html">lwip</a></li><li class="navelem"><a class="el" href="dir_25c34671e217e97e1ee8ef54a46175ec.html">netif</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">espenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="espenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html">lwip/ip_addr.h</a>&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="dhcp_8h.html">lwip/dhcp.h</a>&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="espenc_8h.html">netif/espenc.h</a>&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="esp-open-sdk_2esp-open-lwip_2include_2netif_2driver_2spi_8h.html">netif/driver/spi.h</a>&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gpio_8h.html">gpio.h</a>&quot;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sdk_2include_2mem_8h.html">mem.h</a>&quot;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">    8</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnetif.html">netif</a> <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127">   10</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127a1fe44827a31427c3ee7e20ba03e42a76">   11</a></span>&#160;        <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127a1fe44827a31427c3ee7e20ba03e42a76">SIG_DO_NOTHING</a> = 0,</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07">   12</a></span>&#160;        <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07">SIG_NETIF_POLL</a>,</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d">   13</a></span>&#160;        <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d">SIG_ENC_SCOOP</a></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;} <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127">USER_SIGNALS</a>;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="espenc_8c.html#afc8b567eea1195c5b5c38c16aa7d6871">   16</a></span>&#160;<span class="preprocessor">#define swint_TaskPrio        2</span></div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="espenc_8c.html#a9d611c4427db4d7a829e299162eea77b">   17</a></span>&#160;<span class="preprocessor">#define swint_TaskQueueLen    2</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="espenc_8c.html#ad0cf56e58c144027cb08718d5c7ad940">   18</a></span>&#160;<a class="code" href="os__type_8h.html#a31c610c4705c01b07e272852f4bd17ca">os_event_t</a> <a class="code" href="espenc_8c.html#ad0cf56e58c144027cb08718d5c7ad940">swint_TaskQueue</a>[<a class="code" href="espenc_8c.html#a9d611c4427db4d7a829e299162eea77b">swint_TaskQueueLen</a>];</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a0f5c2a11efd2f3a3ba9dd104d632e594">swint_Task</a>(<a class="code" href="os__type_8h.html#a31c610c4705c01b07e272852f4bd17ca">os_event_t</a> *events);</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">   21</a></span>&#160;<span class="keyword">static</span> uint8_t <a class="code" href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">Enc28j60Bank</a>;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">   22</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a>;</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">   23</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">inint</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">   24</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">handling_int</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="espenc_8c.html#a2239a3e52452ed0f0cd757d4ce5e4c05">   26</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="espenc_8c.html#a2239a3e52452ed0f0cd757d4ce5e4c05">chipEnable</a>() {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="comment">// Force CS pin low</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>));</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <a class="code" href="eagle__soc_8h.html#a06a669a21ddeb7fbee7cca6703ca34ac">PIN_FUNC_SELECT</a>(<a class="code" href="eagle__soc_8h.html#a2cbaa3bc29b2f9c3c048839fb87214a5">PERIPHS_IO_MUX_MTDO_U</a>, <a class="code" href="eagle__soc_8h.html#a29fe2ead43354b50de155514f14672ab">FUNC_GPIO15</a>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="gpio_8h.html#a2cc3f29ed0d46de6cbd2f013281881a6">GPIO_OUTPUT_SET</a>(<a class="code" href="espenc_8h.html#a4d4e73c59441d82b68666731df7759fd">ESP_CS</a>, 0);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="espenc_8c.html#ab8597c7950c0283f785e57b4e02ad76f">   33</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="espenc_8c.html#ab8597c7950c0283f785e57b4e02ad76f">chipDisable</a>() {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="comment">// Return to default CS function</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>));</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="eagle__soc_8h.html#a06a669a21ddeb7fbee7cca6703ca34ac">PIN_FUNC_SELECT</a>(<a class="code" href="eagle__soc_8h.html#a2cbaa3bc29b2f9c3c048839fb87214a5">PERIPHS_IO_MUX_MTDO_U</a>, 2); <span class="comment">//GPIO15 is HSPI CS pin (Chip Select / Slave Select)</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="espenc_8c.html#a655fbec696cb6a8e30069f066615d830">   39</a></span>&#160;uint8_t <a class="code" href="espenc_8c.html#a655fbec696cb6a8e30069f066615d830">readOp</a>(uint8_t op, uint8_t addr) {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>));</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">if</span>(addr &amp; 0x80)</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <span class="keywordflow">return</span>(uint8_t) <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 3, op &gt;&gt; 5, 5, addr, 0, 0, 16, 0) &amp; 0xff; <span class="comment">// Ignore dummy first byte</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <span class="keywordflow">return</span>(uint8_t) <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 3, op &gt;&gt; 5, 5, addr, 0, 0, 8, 0);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">   47</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(uint8_t op, uint8_t addr, uint8_t data) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>));</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 3, op &gt;&gt; 5, 5, addr, 8, data, 0, 0);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">   52</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(uint8_t address) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>));</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span>((address &amp; <a class="code" href="espenc_8h.html#ac60597badc76e6f2c5ce64d862746c67">BANK_MASK</a>) != <a class="code" href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">Enc28j60Bank</a>) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a81c320643a8fcfb3c91f4e059a14c2c0">ECON1_BSEL1</a> | <a class="code" href="espenc_8h.html#ac05b5a98cc41d8736c62a6a96c248940">ECON1_BSEL0</a>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                <a class="code" href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">Enc28j60Bank</a> = address &amp; <a class="code" href="espenc_8h.html#ac60597badc76e6f2c5ce64d862746c67">BANK_MASK</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">Enc28j60Bank</a> &gt;&gt; 5);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">   61</a></span>&#160;<span class="keyword">static</span> uint8_t <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(uint8_t address) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(address);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="espenc_8c.html#a655fbec696cb6a8e30069f066615d830">readOp</a>(<a class="code" href="espenc_8h.html#a608ce779a7d649d80e6ae75b1efe4e68">ENC28J60_READ_CTRL_REG</a>, address);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="espenc_8c.html#ae56f805c88da37e6a1471d779bc9bdb9">   66</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="espenc_8c.html#ae56f805c88da37e6a1471d779bc9bdb9">readReg</a>(uint8_t address) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(address) + (<a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(address + 1) &lt;&lt; 8);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">   70</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(uint8_t address, uint8_t data) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(address);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#ab1b6d259b563e0360243658157a023b2">ENC28J60_WRITE_CTRL_REG</a>, address, data);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">   75</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(uint8_t address, uint16_t data) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(address, data);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(address + 1, data &gt;&gt; 8);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="espenc_8c.html#a6a6cf6fd5a57804e5c5f005babafbafd">   80</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="espenc_8c.html#a6a6cf6fd5a57804e5c5f005babafbafd">readPhyByte</a>(uint8_t address) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a01fb4e4ea7a7b71cbf2b341b0ebd77a3">MIREGADR</a>, address);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a6ca2ed513306c83432028d8ad3d49354">MICMD</a>, <a class="code" href="espenc_8h.html#a5c468f805202bfc0737c024cbd1be32c">MICMD_MIIRD</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#abd6aab564bb58e789243684804aff335">MISTAT</a>) &amp; <a class="code" href="espenc_8h.html#a22b9a31e2a6d031cd672eed1ad883ba8">MISTAT_BUSY</a>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a6ca2ed513306c83432028d8ad3d49354">MICMD</a>, 0x00);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#aad379004aeaf17af6de1ecdf580bc185">MIRD</a> + 1);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="espenc_8c.html#aebb49154d3d932c5ed1a81d6c1d45e1a">   88</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#aebb49154d3d932c5ed1a81d6c1d45e1a">writePhy</a>(uint8_t address, uint16_t data) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a01fb4e4ea7a7b71cbf2b341b0ebd77a3">MIREGADR</a>, address);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a56c95e39fee5469165e12011658d6b0d">MIWR</a>, data);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#abd6aab564bb58e789243684804aff335">MISTAT</a>) &amp; <a class="code" href="espenc_8h.html#a22b9a31e2a6d031cd672eed1ad883ba8">MISTAT_BUSY</a>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">   94</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a>(uint16_t len, uint8_t* data) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;readBuf()&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">if</span>(len != 0) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <a class="code" href="espenc_8c.html#a2239a3e52452ed0f0cd757d4ce5e4c05">chipEnable</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 8, <a class="code" href="espenc_8h.html#a2df968e548600d1a94988d3fa73f9a90">ENC28J60_READ_BUF_MEM</a>, 0, 0, 0, 0, 0, 0);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordflow">while</span>(len--) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                        uint8_t nextbyte;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>)); <span class="comment">//wait for SPI transaction to complete</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                        nextbyte = <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 0, 0, 0, 0, 0, 0, 8, 0);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                        *data++ = nextbyte;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                };</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <a class="code" href="espenc_8c.html#ab8597c7950c0283f785e57b4e02ad76f">chipDisable</a>();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="espenc_8c.html#a921bffb078028c3ee1dd910fd41ec53e">  109</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a921bffb078028c3ee1dd910fd41ec53e">writeBuf</a>(uint16_t len, <span class="keyword">const</span> uint8_t* data) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span>(len != 0) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <a class="code" href="espenc_8c.html#a2239a3e52452ed0f0cd757d4ce5e4c05">chipEnable</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 8, <a class="code" href="espenc_8h.html#a767136e24c87ed51e701f78724ebc78d">ENC28J60_WRITE_BUF_MEM</a>, 0, 0, 8, 0, 0, 0);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">while</span>(len--) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        uint8_t nextbyte = *data++;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                        <span class="keywordflow">while</span>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>)); <span class="comment">//wait for SPI transaction to complete</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        <a class="code" href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 0, 0, 0, 0, 8, nextbyte, 0, 0);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                };</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <a class="code" href="espenc_8c.html#ab8597c7950c0283f785e57b4e02ad76f">chipDisable</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="espenc_8c.html#abc96fe33660001538919e64fc237796f">  122</a></span>&#160;<a class="code" href="err_8h.html#af02d9da80fd66b4f986d2c53d7231ddb">err_t</a> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="espenc_8c.html#abc96fe33660001538919e64fc237796f">enc28j60_link_output</a>(<span class="keyword">struct</span> <a class="code" href="structnetif.html">netif</a> *<a class="code" href="structnetif.html">netif</a>, <span class="keyword">struct</span> <a class="code" href="structpbuf.html">pbuf</a> *p) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// Is this called from a critical section?</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">inint</a>) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">handling_int</a>) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        <a class="code" href="osapi_8h.html#a751d204d0c7e166a527475d79e803454">os_printf</a>(<span class="stringliteral">&quot;OOPS handling int!\r\n&quot;</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a>(<a class="code" href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa6a26d2abbd23290304d6eca27962a076">GPIO_PIN_INTR_DISABLE</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        uint16_t len = p-&gt;<a class="code" href="structpbuf.html#a5259e7ec29bab9c0999b64f2e86b411f">tot_len</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;output, tot_len: %d&quot;</span>, p-&gt;<a class="code" href="structpbuf.html#a5259e7ec29bab9c0999b64f2e86b411f">tot_len</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        uint8_t isUp = (<a class="code" href="espenc_8c.html#a6a6cf6fd5a57804e5c5f005babafbafd">readPhyByte</a>(<a class="code" href="espenc_8h.html#aec37b8c76a880a3c2b8205920f8b911d">PHSTAT2</a>) &gt;&gt; 2) &amp; 1;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;link is up: %d&quot;</span>, isUp);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;pktcnt: %d&quot;</span>, <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a029f8b5f05e4e5182aa9a73e31c4a4f0">EPKTCNT</a>));</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a671b1bccaaf1d135073b3604c85a8ff2">ECON1_TXRST</a>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a671b1bccaaf1d135073b3604c85a8ff2">ECON1_TXRST</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#a66297d20ff1a92778edc575b8d7a6659">EIR_TXERIF</a> | <a class="code" href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#aa9add9ea9c8ec92be8d2a159e6d3cdfa">EWRPT</a>, <a class="code" href="espenc_8h.html#aa9108e0c4b3004b06668c1f213cbfbad">TXSTART_INIT</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a47ff0cb1c26fb850f8a241a472817b03">ETXND</a>, <a class="code" href="espenc_8h.html#aa9108e0c4b3004b06668c1f213cbfbad">TXSTART_INIT</a> + len);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">//writeOp(ENC28J60_WRITE_BUF_MEM, 0, 0x00);</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        uint8_t* buffer = (uint8_t*) <a class="code" href="sdk_2include_2mem_8h.html#ab5bd4ba214011254e942752390f4be00">os_malloc</a>(len);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="pbuf_8h.html#ab0a418a2392133e6b18c7b19f7c04500">pbuf_copy_partial</a>(p, buffer, p-&gt;<a class="code" href="structpbuf.html#a5259e7ec29bab9c0999b64f2e86b411f">tot_len</a>, 0);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="espenc_8c.html#a921bffb078028c3ee1dd910fd41ec53e">writeBuf</a>(len, buffer);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="sdk_2include_2mem_8h.html#aeca859cafb7f4c2eed341334a2c2e97c">os_free</a>(buffer);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#a66297d20ff1a92778edc575b8d7a6659">EIR_TXERIF</a> | <a class="code" href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;before transmission: %02x&quot;</span>, <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>));</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a3a2e731dca9ed10137c429b3d2db006f">ECON1_TXRTS</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        uint16_t count = 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        uint16_t eir = 0;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">         * Possible Problem: This might only work at 4MHz SPI</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">         * so we delay a fixed amount.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">while</span>(((eir = <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>)) &amp; (<a class="code" href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a> | <a class="code" href="espenc_8h.html#a66297d20ff1a92778edc575b8d7a6659">EIR_TXERIF</a>)) == 0 &amp;&amp; ++count &lt; 1000U) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <a class="code" href="osapi_8h.html#a202cca9b5478fe03db5aebd09b23b8dc">os_delay_us</a>(1);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span>(!(eir &amp; <a class="code" href="espenc_8h.html#a66297d20ff1a92778edc575b8d7a6659">EIR_TXERIF</a>) &amp;&amp; count &lt; 1000U) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <span class="comment">// no error; start new transmission</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;transmission success&quot;</span>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a3a2e731dca9ed10137c429b3d2db006f">ECON1_TXRTS</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;transmission failed (%d - %02x)&quot;</span>, count, eir);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="comment">// wait - the longer the packet, the longer the wait</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <a class="code" href="osapi_8h.html#a202cca9b5478fe03db5aebd09b23b8dc">os_delay_us</a>(2 * len);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a671b1bccaaf1d135073b3604c85a8ff2">ECON1_TXRST</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#a671b1bccaaf1d135073b3604c85a8ff2">ECON1_TXRST</a> | <a class="code" href="espenc_8h.html#a3a2e731dca9ed10137c429b3d2db006f">ECON1_TXRTS</a>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, EIR_TXERIF);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a>(<a class="code" href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa5d849d662c8b715252b3905ed9d7f777">GPIO_PIN_INTR_LOLEVEL</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="espenc_8c.html#af8db9f52e4e9f706cfe4d27c390f8f60">  191</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="espenc_8c.html#af8db9f52e4e9f706cfe4d27c390f8f60">interrupt_reg</a> = 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="espenc_8c.html#abad8eb65a3bbaacff290a354199cd349">  193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#abad8eb65a3bbaacff290a354199cd349">enc28j60_handle_packets</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;reading ptr: %04x&quot;</span>, <a class="code" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a870382e2bccef5159be20fe2fd187b59">ERDPT</a>, <a class="code" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        uint16_t packetLen = 0;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        uint16_t rxStatus = 0;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a>(2, (uint8_t*) &amp; <a class="code" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a>(2, (uint8_t*) &amp; packetLen);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a>(2, (uint8_t*) &amp; rxStatus);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// Ignore packet checksum TODO</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        packetLen -= 4;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;next ptr: %04x&quot;</span>, NextPacketPtr);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;packet len: %d (%x)&quot;</span>, packetLen, packetLen);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;rx status: %02x&quot;</span>, rxStatus);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span>(rxStatus &amp; 0x80 == 0) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;RECEIVE FAILED&quot;</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                uint16_t len = packetLen;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keyword">struct </span><a class="code" href="structpbuf.html">pbuf</a>* p = <a class="code" href="pbuf_8h.html#ac6efc2aaeddfea6c95729dc86f785ba4">pbuf_alloc</a>(<a class="code" href="pbuf_8h.html#aee1baa59bb2f85ba575b5a8619ac1ebfab4de441e737330558b609a990cd17346">PBUF_LINK</a>, len, <a class="code" href="pbuf_8h.html#ab7e0e32fcc292c0d7107721766ed92fbac5e9f28455bca98944a030d4b84ecfab">PBUF_RAM</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keywordflow">if</span>(p != 0) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                        uint8_t* data;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        <span class="keyword">struct </span><a class="code" href="structpbuf.html">pbuf</a>* q;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        <span class="keyword">struct </span><a class="code" href="structpbuf.html">pbuf</a>* last;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        <span class="keywordflow">for</span>(q = p; q != 0; q = q-&gt;<a class="code" href="structpbuf.html#a5e5763c94fd18d78937b0b58ce7df341">next</a>) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                data = q-&gt;<a class="code" href="structpbuf.html#a8d32dc3e964369d4eec638fc37fbc460">payload</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                len = q-&gt;<a class="code" href="structpbuf.html#a6f82449625e36e294f5d210268c0703f">len</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;reading %d to %x&quot;</span>, len, data);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                <a class="code" href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a>(len, data);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                        }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#if !ENC_SW_INTERRUPT</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        <span class="comment">/*</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">                         *  I think we should ALWAYS use SWI.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">                         *  not doing so crashes horribly under load</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">                         */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;packet received, passing to netif-&gt;input&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                        <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.<a class="code" href="structnetif.html#a8fe4f1b7b0d710216287da9615164a5c">input</a>(p, &amp;<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                        <span class="comment">/* let last point to the last pbuf in chain r */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        <span class="keywordflow">for</span>(last = p; last-&gt;<a class="code" href="structpbuf.html#a5e5763c94fd18d78937b0b58ce7df341">next</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; last = last-&gt;<a class="code" href="structpbuf.html#a5e5763c94fd18d78937b0b58ce7df341">next</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                        <span class="comment">// os_printf(&quot;ENQUEUE %d at %x\r\n&quot;, p-&gt;tot_len, p);</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        <a class="code" href="cc_8h.html#a09658c138f072b24ba5ea0cf04efc7d4">SYS_ARCH_PROTECT</a>(lev);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_first != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                <a class="code" href="esp-open-sdk_2esp-open-lwip_2include_2lwip_2debug_8h.html#a94ad086267808462beae2b38f91996ed">LWIP_ASSERT</a>(<span class="stringliteral">&quot;if first != NULL, last must also be != NULL&quot;</span>, <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_last != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_last-&gt;<a class="code" href="structnetif.html#ae77736b64df442242795220d76be6b86">next</a> = p;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_last = last;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_first = p;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.loop_last = last;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                        <a class="code" href="cc_8h.html#a985dd6a54f63dec5ee774ac395165511">SYS_ARCH_UNPROTECT</a>(lev);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#if LWIP_NETIF_LOOPBACK_MULTITHREADING</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="comment">// For multithreading environment, schedule a call to netif_poll</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        <a class="code" href="tcpip_8h.html#a7eb868a1215472ec38f3f2a04d442b9f">tcpip_callback</a>((<a class="code" href="tcpip_8h.html#a35203296bb838f3b493839ffc6e7285d">tcpip_callback_fn</a>) netif_poll, &amp;<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        <a class="code" href="user__interface_8h.html#adab1155f3a463f2b05a9bde65b37514f">system_os_post</a>(<a class="code" href="espenc_8c.html#afc8b567eea1195c5b5c38c16aa7d6871">swint_TaskPrio</a>, <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07">SIG_NETIF_POLL</a>, (<a class="code" href="ets__sys_8h.html#af69975ab315b652862825f9929e436c0">ETSParam</a>) &amp; <a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LWIP_NETIF_LOOPBACK_MULTITHREADING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;pbuf_alloc failed!&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a86d77e305cc8d23f335fb733870a873c">ECON2</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a86d77e305cc8d23f335fb733870a873c">ECON2</a>, <a class="code" href="espenc_8h.html#a1fab919c4d16b2e96072b0479fc4b617">ECON2_PKTDEC</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a48479a2d2567c0d512bd7a3a62a2ed00">ERXRDPT</a>, NextPacketPtr);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="espenc_8c.html#a55dfa017402fc9454bf75d0536cb2425">  269</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a55dfa017402fc9454bf75d0536cb2425">enc_scoop_packets</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">handling_int</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a029f8b5f05e4e5182aa9a73e31c4a4f0">EPKTCNT</a>) &gt; 0)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <a class="code" href="espenc_8c.html#abad8eb65a3bbaacff290a354199cd349">enc28j60_handle_packets</a>();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#a11fcfa608a5040c26cc8f2c2d314ba80">EIR_PKTIF</a>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// ready for next IRQ</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">//log1(&quot;INT F&quot;);</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">handling_int</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">inint</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a>(<a class="code" href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa5d849d662c8b715252b3905ed9d7f777">GPIO_PIN_INTR_LOLEVEL</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// SW Interrupt handler</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="espenc_8c.html#a0f5c2a11efd2f3a3ba9dd104d632e594">  285</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="espenc_8c.html#a0f5c2a11efd2f3a3ba9dd104d632e594">swint_Task</a>(<a class="code" href="os__type_8h.html#a31c610c4705c01b07e272852f4bd17ca">os_event_t</a> *events) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">//os_printf(&quot;Sig: %d\r\n&quot;, events-&gt;sig);</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">switch</span>(events-&gt;sig) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d">SIG_ENC_SCOOP</a>:</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        <a class="code" href="espenc_8c.html#a55dfa017402fc9454bf75d0536cb2425">enc_scoop_packets</a>();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07">SIG_NETIF_POLL</a>:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <span class="keyword">struct </span><a class="code" href="structnetif.html">netif</a> *<a class="code" href="structnetif.html">netif</a> = (<span class="keyword">struct </span>netif *) events-&gt;par;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        netif_poll(netif);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127a1fe44827a31427c3ee7e20ba03e42a76">SIG_DO_NOTHING</a>:</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        <span class="comment">// Intentionally ignoring other signals</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <a class="code" href="osapi_8h.html#a751d204d0c7e166a527475d79e803454">os_printf</a>(<span class="stringliteral">&quot;Spurious Signal received\r\n&quot;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="espenc_8c.html#a6e1c907e7ece2b9b08be005d9a78089c">  307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="espenc_8c.html#a6e1c907e7ece2b9b08be005d9a78089c">interrupt_handler</a>(<span class="keywordtype">void</span> *arg) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">inint</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">//log1(&quot;INT T&quot;);</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="c__types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> gpio_status = <a class="code" href="eagle__soc_8h.html#a411ba054f4eb8f22ac441f8bf5734d78">GPIO_REG_READ</a>(<a class="code" href="eagle__soc_8h.html#adb2c162290a66edc2035cf91aaa767f8">GPIO_STATUS_ADDRESS</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">//ETS_GPIO_INTR_DISABLE();</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">//GPIO_REG_WRITE(GPIO_STATUS_W1TC_ADDRESS, GPIO_REG_READ(GPIO_STATUS_ADDRESS));</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span>(1 &lt;&lt; <a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a> &amp; gpio_status) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <a class="code" href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a>(<a class="code" href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa6a26d2abbd23290304d6eca27962a076">GPIO_PIN_INTR_DISABLE</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                uint8_t interrupt = <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                uint8_t pktCnt = <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a029f8b5f05e4e5182aa9a73e31c4a4f0">EPKTCNT</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;\r\n *** INTERRUPT (%02X / %d) ***&quot;</span>, interrupt, pktCnt);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span>(pktCnt &gt; 0 &amp;&amp; (interrupt &amp; <a class="code" href="espenc_8h.html#a11fcfa608a5040c26cc8f2c2d314ba80">EIR_PKTIF</a>)) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;pktCnt &gt; 0&quot;</span>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                        <span class="comment">// ACK interrupt</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                        <a class="code" href="eagle__soc_8h.html#a6794e1912ddba03a1e154af6ceb85486">GPIO_REG_WRITE</a>(<a class="code" href="eagle__soc_8h.html#a745ea801997a9a14f81f3ed671b018cd">GPIO_STATUS_W1TC_ADDRESS</a>, gpio_status &amp; <a class="code" href="c__types_8h.html#a4eaf4bf81c52c3f375967906e4d5ba17">BIT</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>));</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        <a class="code" href="user__interface_8h.html#adab1155f3a463f2b05a9bde65b37514f">system_os_post</a>(<a class="code" href="espenc_8c.html#afc8b567eea1195c5b5c38c16aa7d6871">swint_TaskPrio</a>, <a class="code" href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d">SIG_ENC_SCOOP</a>, 0);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="comment">// Spurious IRQ?</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <a class="code" href="osapi_8h.html#a751d204d0c7e166a527475d79e803454">os_printf</a>(<span class="stringliteral">&quot;Spurious IRQ!!!&quot;</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <a class="code" href="eagle__soc_8h.html#a6794e1912ddba03a1e154af6ceb85486">GPIO_REG_WRITE</a>(<a class="code" href="eagle__soc_8h.html#a745ea801997a9a14f81f3ed671b018cd">GPIO_STATUS_W1TC_ADDRESS</a>, gpio_status &amp; <a class="code" href="c__types_8h.html#a4eaf4bf81c52c3f375967906e4d5ba17">BIT</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>));</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">// http://lwip.wikia.com/wiki/Writing_a_device_driver</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="espenc_8c.html#a81a1bda1746cf556eca33a6ab92ea851">  340</a></span>&#160;<a class="code" href="err_8h.html#af02d9da80fd66b4f986d2c53d7231ddb">err_t</a> <a class="code" href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a> <a class="code" href="espenc_8c.html#a81a1bda1746cf556eca33a6ab92ea851">enc28j60_init</a>(<span class="keyword">struct</span> <a class="code" href="structnetif.html">netif</a> *<a class="code" href="structnetif.html">netif</a>) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;initializing&quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#acaaac9b415a7be73eb8a287c8ed18a8d">linkoutput</a> = <a class="code" href="espenc_8c.html#abc96fe33660001538919e64fc237796f">enc28j60_link_output</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#a32fca6ffd28bb9af3f891a378827a67e">name</a>[0] = <span class="charliteral">&#39;e&#39;</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#a32fca6ffd28bb9af3f891a378827a67e">name</a>[1] = <span class="charliteral">&#39;n&#39;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#aca7d56b4e0f822b0ced2885f222b8d48">mtu</a> = 1500;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#afe1181561cb16241f3cb5ed01e567d42">hwaddr_len</a> = 6;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#a8e1dcfe65db487feecd244355f39215e">output</a> = etharp_output;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        netif-&gt;<a class="code" href="structnetif.html#a1c171db6097bbb6f09f63549a66e00ea">flags</a> |= <a class="code" href="netif_8h.html#aef64fe15c82bc7b235366923e517104e">NETIF_FLAG_BROADCAST</a> | <a class="code" href="netif_8h.html#a92448dc510bc8d700c09e5c971ef0676">NETIF_FLAG_ETHARP</a>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;initializing hardware&quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="spi_8c.html#ab1b1ee052705fb788f5f312bb5dff9b3">spi_init</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="spi_8c.html#aaf27c8705f9b667677d7c5f923c0333d">spi_mode</a>(<a class="code" href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a>, 0, 0);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#ae1ae45ce0e49f35d25bb1641f7c6942c">ENC28J60_SOFT_RESET</a>, 0, <a class="code" href="espenc_8h.html#ae1ae45ce0e49f35d25bb1641f7c6942c">ENC28J60_SOFT_RESET</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="osapi_8h.html#a202cca9b5478fe03db5aebd09b23b8dc">os_delay_us</a>(2000); <span class="comment">// errata B7/2</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        uint8_t estat;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">while</span>(!(estat = <a class="code" href="espenc_8c.html#a655fbec696cb6a8e30069f066615d830">readOp</a>(<a class="code" href="espenc_8h.html#a608ce779a7d649d80e6ae75b1efe4e68">ENC28J60_READ_CTRL_REG</a>, <a class="code" href="espenc_8h.html#ad05043a04b51b3953259c24040e2e99f">ESTAT</a>)) &amp; <a class="code" href="espenc_8h.html#a4283378a63dc5913f07e96ea96cf8cdb">ESTAT_CLKRDY</a>) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;estat: %02x&quot;</span>, estat);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a> = <a class="code" href="espenc_8h.html#a30fc7709c1cdffc38bd8949480456470">RXSTART_INIT</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#af659fef7d667a4aef848535ca3d47e29">ERXST</a>, <a class="code" href="espenc_8h.html#a30fc7709c1cdffc38bd8949480456470">RXSTART_INIT</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a48479a2d2567c0d512bd7a3a62a2ed00">ERXRDPT</a>, <a class="code" href="espenc_8h.html#a30fc7709c1cdffc38bd8949480456470">RXSTART_INIT</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a2c2511b1039fa0939bc33262effaa9ba">ERXND</a>, <a class="code" href="espenc_8h.html#a410181bf68959f297703e3afdf73454b">RXSTOP_INIT</a>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#acc0affa8c69ea2a90c8ffa6b50764c30">ETXST</a>, <a class="code" href="espenc_8h.html#aa9108e0c4b3004b06668c1f213cbfbad">TXSTART_INIT</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a47ff0cb1c26fb850f8a241a472817b03">ETXND</a>, <a class="code" href="espenc_8h.html#ac199471e69f679cbf9e5e69c1d34bcef">TXSTOP_INIT</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#ac5ff36d9b43977e5dd6548170ec93ddc">ERXFCON</a>, <a class="code" href="espenc_8h.html#af22d9ed047710a75f3226e12945e7014">ERXFCON_UCEN</a> | <a class="code" href="espenc_8h.html#ab24fd0fbd4dd4ef84ee86db0d20f655c">ERXFCON_CRCEN</a> | <a class="code" href="espenc_8h.html#ac491e02aff4b227289f14f7b98c0ab35">ERXFCON_PMEN</a> | <a class="code" href="espenc_8h.html#a1b56128234d0790b0d7253f4357d2adb">ERXFCON_BCEN</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a7231ae8160a585d71a3e96d93358970c">EPMM0</a>, 0x303f);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#aa0148f7ca7a2f103f153ce5d0b5030dd">EPMCS</a>, 0xf7f9);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#ab64add14e73a7308bd32343c45caf79d">MACON1</a>, <a class="code" href="espenc_8h.html#acca2bd606f4beb5ecf4051879d3f8484">MACON1_MARXEN</a> | <a class="code" href="espenc_8h.html#adad2d7dff2675636ec7625e5e3661da1">MACON1_TXPAUS</a> | <a class="code" href="espenc_8h.html#af2966ecb11b3dccc4a6eead5321b268d">MACON1_RXPAUS</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a01501b400de6174cd44cd52cf9da0950">MACON2</a>, 0x00);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a37e80f66673c39e7db383e0b11a159ea">MACON3</a>,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <a class="code" href="espenc_8h.html#a92092773c7b76344f6c318f416007f5c">MACON3_PADCFG0</a> | <a class="code" href="espenc_8h.html#a73e8f004b429cdbc2161d418b8e2e4c2">MACON3_TXCRCEN</a> | <a class="code" href="espenc_8h.html#a9cbf4c5171f6d945f142b8150aaf9c0e">MACON3_FRMLNEN</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a06154d588a4de88a36a07d4a840df794">MAIPG</a>, 0x0C12);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a0aa3bb65f69bc921f3b4020410f7efc2">MABBIPG</a>, 0x12);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a>(<a class="code" href="espenc_8h.html#a119009b9b272e3785b7f77a307295303">MAMXFL</a>, <a class="code" href="espenc_8h.html#a685a78b7765b2e4683a6e156cb08f553">MAX_FRAMELEN</a>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#ab09dce1b21cca7564099bf5c2977027d">MAADR5</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[0]);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#ab5bd94627c03b8c599997934df7f0091">MAADR4</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[1]);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#adab05794c311d260abaaec301a942be5">MAADR3</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[2]);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a12821080889b4c07b4d6592fbcb67aca">MAADR2</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[3]);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#ae90f98e596cd117bc03ec08e12303948">MAADR1</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[4]);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a>(<a class="code" href="espenc_8h.html#a120bccb0df5d68a311c7030cfb96cb60">MAADR0</a>, netif-&gt;<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>[5]);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// Force soft reset PHY.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// Sometimes the SPI reset does not reset it,</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="comment">// or it is not actually ready yet.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="comment">// I&#39;m unsure which is the actual case, but this solves</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// a problem that occurs for me, where the PHY never seems</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="comment">// to be able to receive packets. --AJK</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="espenc_8c.html#aebb49154d3d932c5ed1a81d6c1d45e1a">writePhy</a>(<a class="code" href="espenc_8h.html#a03e10f035e4f21f0d422a10037bd484c">PHCON1</a>, <a class="code" href="espenc_8h.html#a3b13c70f7318bbdfec1c49d048f7610a">PHCON1_PRST</a>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">while</span>(!(estat = <a class="code" href="espenc_8c.html#a6a6cf6fd5a57804e5c5f005babafbafd">readPhyByte</a>(<a class="code" href="espenc_8h.html#a03e10f035e4f21f0d422a10037bd484c">PHCON1</a>)) &amp; <a class="code" href="espenc_8h.html#a3b13c70f7318bbdfec1c49d048f7610a">PHCON1_PRST</a>) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;Phy reset stat: %02x&quot;</span>, estat);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="espenc_8c.html#aebb49154d3d932c5ed1a81d6c1d45e1a">writePhy</a>(<a class="code" href="espenc_8h.html#a9cf7f25d840eaf2d2101797ee0e2e29e">PHCON2</a>, <a class="code" href="espenc_8h.html#a67f4baba49a56729548246a2c4cf60c4">PHCON2_HDLDIS</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a72ac42db94893a565a52821f5ae95856">EIE</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a72ac42db94893a565a52821f5ae95856">EIE</a>, <a class="code" href="espenc_8h.html#a6e7ec3932ab30e65b5ea60440053a4bc">EIE_INTIE</a> | <a class="code" href="espenc_8h.html#a1171f52b3a35649112ce502a26834bdd">EIE_PKTIE</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a>, <a class="code" href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a>, <a class="code" href="espenc_8h.html#a11fcfa608a5040c26cc8f2c2d314ba80">EIR_PKTIF</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a>(<a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a>(<a class="code" href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a>, <a class="code" href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a>, <a class="code" href="espenc_8h.html#ace8508fae6ed0c6d29e8879194de5fbc">ECON1_RXEN</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        uint8_t rev = <a class="code" href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a>(<a class="code" href="espenc_8h.html#a5eec0cbe196f0a26a9b2f30a74e70c60">EREVID</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="comment">// microchip forgot to step the number on the silcon when they</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">// released the revision B7. 6 is now rev B7. We still have</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">// to see what they do when they release B8. At the moment</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// there is no B8 out yet</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span>(rev &gt; 5) ++rev;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;hardware ready, rev: %d&quot;</span>, rev);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">// You should __ALWAYS__ start ISR&#39;s __LAST__</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="ets__sys_8h.html#a3b7131effc447b874d53608df1093c9d">ETS_GPIO_INTR_ATTACH</a>(<a class="code" href="espenc_8c.html#a6e1c907e7ece2b9b08be005d9a78089c">interrupt_handler</a>, &amp;<a class="code" href="espenc_8c.html#af8db9f52e4e9f706cfe4d27c390f8f60">interrupt_reg</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="ets__sys_8h.html#aa8e36bac2666a375c6ce428a88625b4a">ETS_GPIO_INTR_ENABLE</a>();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="gpio_8h.html#a50dfd53dc1a0e2afab4359a4cdcae406">gpio_register_set</a>(<a class="code" href="gpio_8h.html#a261b2551d50fb5faeff9abede9738546">GPIO_PIN_ADDR</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="eagle__soc_8h.html#a6b11e18130f19dba26eb75d4ca443bb2">GPIO_PIN_INT_TYPE_SET</a>(<a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa6a26d2abbd23290304d6eca27962a076">GPIO_PIN_INTR_DISABLE</a>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                | <a class="code" href="eagle__soc_8h.html#af8ecde3ecafe222e9aa837122325e3da">GPIO_PIN_PAD_DRIVER_SET</a>(<a class="code" href="eagle__soc_8h.html#a460a2f20474db259508bdcdbf65d32c7">GPIO_PAD_DRIVER_DISABLE</a>)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                | <a class="code" href="eagle__soc_8h.html#a7c875e005fa8a05a07bcdb7d81972235">GPIO_PIN_SOURCE_SET</a>(<a class="code" href="eagle__soc_8h.html#ada198f2e2c336d941ae39e8c3dd51bdf">GPIO_AS_PIN_SOURCE</a>));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="eagle__soc_8h.html#a6794e1912ddba03a1e154af6ceb85486">GPIO_REG_WRITE</a>(<a class="code" href="eagle__soc_8h.html#a745ea801997a9a14f81f3ed671b018cd">GPIO_STATUS_W1TC_ADDRESS</a>, 1 &lt;&lt; <a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a>(<a class="code" href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a>(<a class="code" href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a>), <a class="code" href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa5d849d662c8b715252b3905ed9d7f777">GPIO_PIN_INTR_LOLEVEL</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a>(<span class="stringliteral">&quot;interrupts enabled&quot;</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="err_8h.html#a98c763adfeea8e9831c46ec269e47ae9">ERR_OK</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="espenc_8c.html#a193505f7e2d8f132ca9698a32783fe93">  429</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnetif.html">netif</a>* <a class="code" href="espenc_8c.html#a193505f7e2d8f132ca9698a32783fe93">espenc_init</a>(uint8_t *mac_addr, <a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aa21d642e6874b9df89f9e404574d62a9">ip_addr_t</a> *ip, <a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aa21d642e6874b9df89f9e404574d62a9">ip_addr_t</a> *mask, <a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aa21d642e6874b9df89f9e404574d62a9">ip_addr_t</a> *<a class="code" href="structnetif.html#a353875b68ea303d237d1c3406134ec76">gw</a>, <span class="keywordtype">bool</span> dhcp) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aa21d642e6874b9df89f9e404574d62a9">ip_addr_t</a> nulladdr;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keyword">struct </span><a class="code" href="structnetif.html">netif</a>* new_netif;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="user__interface_8h.html#a7c5f9848e9291e4ccb9dbbfaad452e9d">system_os_task</a>(<a class="code" href="espenc_8c.html#a0f5c2a11efd2f3a3ba9dd104d632e594">swint_Task</a>, <a class="code" href="espenc_8c.html#afc8b567eea1195c5b5c38c16aa7d6871">swint_TaskPrio</a>, <a class="code" href="espenc_8c.html#ad0cf56e58c144027cb08718d5c7ad940">swint_TaskQueue</a>, <a class="code" href="espenc_8c.html#a9d611c4427db4d7a829e299162eea77b">swint_TaskQueueLen</a>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a58aee4166c466f9ac7035bf5cc9f9974">IP4_ADDR</a>(&amp;nulladdr, 0, 0, 0, 0);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="osapi_8h.html#ac5c79bf463c8eba708ea34fccc8ec7c1">os_memcpy</a>(<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>.<a class="code" href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">hwaddr</a>, mac_addr, 6);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span>(dhcp) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                new_netif = <a class="code" href="netif_8h.html#a31f162ebf8884aced6e232961fd118c9">netif_add</a>(&amp;<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>, &amp;nulladdr, &amp;nulladdr, &amp;nulladdr, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="espenc_8c.html#a81a1bda1746cf556eca33a6ab92ea851">enc28j60_init</a>, ethernet_input);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">if</span>(new_netif) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        dhcp_start(new_netif);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                new_netif = <a class="code" href="netif_8h.html#a31f162ebf8884aced6e232961fd118c9">netif_add</a>(&amp;<a class="code" href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a>, ip, mask, gw, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="espenc_8c.html#a81a1bda1746cf556eca33a6ab92ea851">enc28j60_init</a>, ethernet_input);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">if</span>(new_netif) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                        <a class="code" href="netif_8h.html#aa51f31eb68fa9ca6f0e9e3fbd06b3945">netif_set_up</a>(new_netif);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> new_netif;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="ttc" id="espenc_8h_html_af2966ecb11b3dccc4a6eead5321b268d"><div class="ttname"><a href="espenc_8h.html#af2966ecb11b3dccc4a6eead5321b268d">MACON1_RXPAUS</a></div><div class="ttdeci">#define MACON1_RXPAUS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00149">espenc.h:149</a></div></div>
<div class="ttc" id="espenc_8h_html_a7231ae8160a585d71a3e96d93358970c"><div class="ttname"><a href="espenc_8h.html#a7231ae8160a585d71a3e96d93358970c">EPMM0</a></div><div class="ttdeci">#define EPMM0</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00054">espenc.h:54</a></div></div>
<div class="ttc" id="structnetif_html_ab91f76223d5a7f1a64f03ac9dd7113a4"><div class="ttname"><a href="structnetif.html#ab91f76223d5a7f1a64f03ac9dd7113a4">netif::hwaddr</a></div><div class="ttdeci">u8_t hwaddr[NETIF_MAX_HWADDR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00191">netif.h:191</a></div></div>
<div class="ttc" id="user__interface_8h_html_adab1155f3a463f2b05a9bde65b37514f"><div class="ttname"><a href="user__interface_8h.html#adab1155f3a463f2b05a9bde65b37514f">system_os_post</a></div><div class="ttdeci">bool system_os_post(uint8 prio, os_signal_t sig, os_param_t par)</div></div>
<div class="ttc" id="espenc_8c_html_abad8eb65a3bbaacff290a354199cd349"><div class="ttname"><a href="espenc_8c.html#abad8eb65a3bbaacff290a354199cd349">enc28j60_handle_packets</a></div><div class="ttdeci">void enc28j60_handle_packets(void)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00193">espenc.c:193</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a06a669a21ddeb7fbee7cca6703ca34ac"><div class="ttname"><a href="eagle__soc_8h.html#a06a669a21ddeb7fbee7cca6703ca34ac">PIN_FUNC_SELECT</a></div><div class="ttdeci">#define PIN_FUNC_SELECT(PIN_NAME, FUNC)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00270">eagle_soc.h:270</a></div></div>
<div class="ttc" id="espenc_8h_html_a5eec0cbe196f0a26a9b2f30a74e70c60"><div class="ttname"><a href="espenc_8h.html#a5eec0cbe196f0a26a9b2f30a74e70c60">EREVID</a></div><div class="ttdeci">#define EREVID</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00095">espenc.h:95</a></div></div>
<div class="ttc" id="espenc_8h_html_a870382e2bccef5159be20fe2fd187b59"><div class="ttname"><a href="espenc_8h.html#a870382e2bccef5159be20fe2fd187b59">ERDPT</a></div><div class="ttdeci">#define ERDPT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00033">espenc.h:33</a></div></div>
<div class="ttc" id="espenc_8c_html_aa384e05ea3543cb9fca318f6623952fc"><div class="ttname"><a href="espenc_8c.html#aa384e05ea3543cb9fca318f6623952fc">writeOp</a></div><div class="ttdeci">void writeOp(uint8_t op, uint8_t addr, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00047">espenc.c:47</a></div></div>
<div class="ttc" id="structpbuf_html_a5259e7ec29bab9c0999b64f2e86b411f"><div class="ttname"><a href="structpbuf.html#a5259e7ec29bab9c0999b64f2e86b411f">pbuf::tot_len</a></div><div class="ttdeci">u16_t tot_len</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00090">pbuf.h:90</a></div></div>
<div class="ttc" id="espenc_8h_html_acca2bd606f4beb5ecf4051879d3f8484"><div class="ttname"><a href="espenc_8h.html#acca2bd606f4beb5ecf4051879d3f8484">MACON1_MARXEN</a></div><div class="ttdeci">#define MACON1_MARXEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00151">espenc.h:151</a></div></div>
<div class="ttc" id="spi_8c_html_acebb579091ca980f217d3e5f3bd1f1d5"><div class="ttname"><a href="spi_8c.html#acebb579091ca980f217d3e5f3bd1f1d5">spi_transaction</a></div><div class="ttdeci">ICACHE_FLASH_ATTR uint32 spi_transaction(uint8 spi_no, uint8 cmd_bits, uint16 cmd_data, uint32 addr_bits, uint32 addr_data, uint32 dout_bits, uint32 dout_data, uint32 din_bits, uint32 dummy_bits)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00241">spi.c:241</a></div></div>
<div class="ttc" id="espenc_8h_html_ac199471e69f679cbf9e5e69c1d34bcef"><div class="ttname"><a href="espenc_8h.html#ac199471e69f679cbf9e5e69c1d34bcef">TXSTOP_INIT</a></div><div class="ttdeci">#define TXSTOP_INIT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00243">espenc.h:243</a></div></div>
<div class="ttc" id="espenc_8h_html_a03e10f035e4f21f0d422a10037bd484c"><div class="ttname"><a href="espenc_8h.html#a03e10f035e4f21f0d422a10037bd484c">PHCON1</a></div><div class="ttdeci">#define PHCON1</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00187">espenc.h:187</a></div></div>
<div class="ttc" id="espenc_8h_html_a1fab919c4d16b2e96072b0479fc4b617"><div class="ttname"><a href="espenc_8h.html#a1fab919c4d16b2e96072b0479fc4b617">ECON2_PKTDEC</a></div><div class="ttdeci">#define ECON2_PKTDEC</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00134">espenc.h:134</a></div></div>
<div class="ttc" id="espenc_8c_html_aecf2d3bf4538bec088e475785319c127"><div class="ttname"><a href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127">USER_SIGNALS</a></div><div class="ttdeci">USER_SIGNALS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00010">espenc.c:10</a></div></div>
<div class="ttc" id="espenc_8h_html_ad05043a04b51b3953259c24040e2e99f"><div class="ttname"><a href="espenc_8h.html#ad05043a04b51b3953259c24040e2e99f">ESTAT</a></div><div class="ttdeci">#define ESTAT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00029">espenc.h:29</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_af1d34aede3ee105d146bf083aed15782"><div class="ttname"><a href="eagle__soc_8h.html#af1d34aede3ee105d146bf083aed15782">GPIO_ID_PIN</a></div><div class="ttdeci">#define GPIO_ID_PIN(n)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00125">eagle_soc.h:125</a></div></div>
<div class="ttc" id="dhcp_8h_html"><div class="ttname"><a href="dhcp_8h.html">dhcp.h</a></div></div>
<div class="ttc" id="structpbuf_html_a5e5763c94fd18d78937b0b58ce7df341"><div class="ttname"><a href="structpbuf.html#a5e5763c94fd18d78937b0b58ce7df341">pbuf::next</a></div><div class="ttdeci">struct pbuf * next</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00078">pbuf.h:78</a></div></div>
<div class="ttc" id="structpbuf_html_a6f82449625e36e294f5d210268c0703f"><div class="ttname"><a href="structpbuf.html#a6f82449625e36e294f5d210268c0703f">pbuf::len</a></div><div class="ttdeci">u16_t len</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00093">pbuf.h:93</a></div></div>
<div class="ttc" id="espenc_8h_html_a22b9a31e2a6d031cd672eed1ad883ba8"><div class="ttname"><a href="espenc_8h.html#a22b9a31e2a6d031cd672eed1ad883ba8">MISTAT_BUSY</a></div><div class="ttdeci">#define MISTAT_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00174">espenc.h:174</a></div></div>
<div class="ttc" id="espenc_8c_html_aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d"><div class="ttname"><a href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127afc472daaa2decef9c69a4d427b4a083d">SIG_ENC_SCOOP</a></div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00013">espenc.c:13</a></div></div>
<div class="ttc" id="gpio_8h_html_a0adef8a3e9d5c302d96d1ddc360f7c79"><div class="ttname"><a href="gpio_8h.html#a0adef8a3e9d5c302d96d1ddc360f7c79">gpio_pin_intr_state_set</a></div><div class="ttdeci">void gpio_pin_intr_state_set(uint32 i, GPIO_INT_TYPE intr_state)</div></div>
<div class="ttc" id="gpio_8h_html_a50dfd53dc1a0e2afab4359a4cdcae406"><div class="ttname"><a href="gpio_8h.html#a50dfd53dc1a0e2afab4359a4cdcae406">gpio_register_set</a></div><div class="ttdeci">void gpio_register_set(uint32 reg_id, uint32 value)</div></div>
<div class="ttc" id="tcpip_8h_html_a35203296bb838f3b493839ffc6e7285d"><div class="ttname"><a href="tcpip_8h.html#a35203296bb838f3b493839ffc6e7285d">tcpip_callback_fn</a></div><div class="ttdeci">void(* tcpip_callback_fn)(void *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l00078">tcpip.h:78</a></div></div>
<div class="ttc" id="espenc_8h_html_a029f8b5f05e4e5182aa9a73e31c4a4f0"><div class="ttname"><a href="espenc_8h.html#a029f8b5f05e4e5182aa9a73e31c4a4f0">EPKTCNT</a></div><div class="ttdeci">#define EPKTCNT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00067">espenc.h:67</a></div></div>
<div class="ttc" id="espenc_8c_html_a921bffb078028c3ee1dd910fd41ec53e"><div class="ttname"><a href="espenc_8c.html#a921bffb078028c3ee1dd910fd41ec53e">writeBuf</a></div><div class="ttdeci">static void writeBuf(uint16_t len, const uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00109">espenc.c:109</a></div></div>
<div class="ttc" id="espenc_8h_html_a685a78b7765b2e4683a6e156cb08f553"><div class="ttname"><a href="espenc_8h.html#a685a78b7765b2e4683a6e156cb08f553">MAX_FRAMELEN</a></div><div class="ttdeci">#define MAX_FRAMELEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00231">espenc.h:231</a></div></div>
<div class="ttc" id="espenc_8h_html_ab24fd0fbd4dd4ef84ee86db0d20f655c"><div class="ttname"><a href="espenc_8h.html#ab24fd0fbd4dd4ef84ee86db0d20f655c">ERXFCON_CRCEN</a></div><div class="ttdeci">#define ERXFCON_CRCEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00103">espenc.h:103</a></div></div>
<div class="ttc" id="espenc_8c_html_af860a4d481026f0532a26c86dc9e1276"><div class="ttname"><a href="espenc_8c.html#af860a4d481026f0532a26c86dc9e1276">enc_netif</a></div><div class="ttdeci">struct netif enc_netif</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00008">espenc.c:8</a></div></div>
<div class="ttc" id="espenc_8c_html_aebb49154d3d932c5ed1a81d6c1d45e1a"><div class="ttname"><a href="espenc_8c.html#aebb49154d3d932c5ed1a81d6c1d45e1a">writePhy</a></div><div class="ttdeci">static void writePhy(uint8_t address, uint16_t data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00088">espenc.c:88</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_adb2c162290a66edc2035cf91aaa767f8"><div class="ttname"><a href="eagle__soc_8h.html#adb2c162290a66edc2035cf91aaa767f8">GPIO_STATUS_ADDRESS</a></div><div class="ttdeci">#define GPIO_STATUS_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00110">eagle_soc.h:110</a></div></div>
<div class="ttc" id="gpio_8h_html"><div class="ttname"><a href="gpio_8h.html">gpio.h</a></div></div>
<div class="ttc" id="espenc_8h_html_a608ce779a7d649d80e6ae75b1efe4e68"><div class="ttname"><a href="espenc_8h.html#a608ce779a7d649d80e6ae75b1efe4e68">ENC28J60_READ_CTRL_REG</a></div><div class="ttdeci">#define ENC28J60_READ_CTRL_REG</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00220">espenc.h:220</a></div></div>
<div class="ttc" id="netif_8h_html_a31f162ebf8884aced6e232961fd118c9"><div class="ttname"><a href="netif_8h.html#a31f162ebf8884aced6e232961fd118c9">netif_add</a></div><div class="ttdeci">struct netif * netif_add(struct netif *netif, ip_addr_t *ipaddr, ip_addr_t *netmask, ip_addr_t *gw, void *state, netif_init_fn init, netif_input_fn input) ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="netif_8c_source.html#l00150">netif.c:150</a></div></div>
<div class="ttc" id="gpio_8h_html_a6f9e27f786736a857f19c93ab7f7ebbaa6a26d2abbd23290304d6eca27962a076"><div class="ttname"><a href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa6a26d2abbd23290304d6eca27962a076">GPIO_PIN_INTR_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00036">gpio.h:36</a></div></div>
<div class="ttc" id="espenc_8c_html_a6a6cf6fd5a57804e5c5f005babafbafd"><div class="ttname"><a href="espenc_8c.html#a6a6cf6fd5a57804e5c5f005babafbafd">readPhyByte</a></div><div class="ttdeci">static uint16_t readPhyByte(uint8_t address)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00080">espenc.c:80</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_ada198f2e2c336d941ae39e8c3dd51bdf"><div class="ttname"><a href="eagle__soc_8h.html#ada198f2e2c336d941ae39e8c3dd51bdf">GPIO_AS_PIN_SOURCE</a></div><div class="ttdeci">#define GPIO_AS_PIN_SOURCE</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00159">eagle_soc.h:159</a></div></div>
<div class="ttc" id="espenc_8h_html_a11fcfa608a5040c26cc8f2c2d314ba80"><div class="ttname"><a href="espenc_8h.html#a11fcfa608a5040c26cc8f2c2d314ba80">EIR_PKTIF</a></div><div class="ttdeci">#define EIR_PKTIF</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00119">espenc.h:119</a></div></div>
<div class="ttc" id="def_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00047">def.h:47</a></div></div>
<div class="ttc" id="espenc_8h_html_adad2d7dff2675636ec7625e5e3661da1"><div class="ttname"><a href="espenc_8h.html#adad2d7dff2675636ec7625e5e3661da1">MACON1_TXPAUS</a></div><div class="ttdeci">#define MACON1_TXPAUS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00148">espenc.h:148</a></div></div>
<div class="ttc" id="espenc_8h_html"><div class="ttname"><a href="espenc_8h.html">espenc.h</a></div></div>
<div class="ttc" id="espenc_8h_html_a4283378a63dc5913f07e96ea96cf8cdb"><div class="ttname"><a href="espenc_8h.html#a4283378a63dc5913f07e96ea96cf8cdb">ESTAT_CLKRDY</a></div><div class="ttdeci">#define ESTAT_CLKRDY</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00131">espenc.h:131</a></div></div>
<div class="ttc" id="structnetif_html_a8e1dcfe65db487feecd244355f39215e"><div class="ttname"><a href="structnetif.html#a8e1dcfe65db487feecd244355f39215e">netif::output</a></div><div class="ttdeci">netif_output_fn output</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00154">netif.h:154</a></div></div>
<div class="ttc" id="espenc_8c_html_ae56f805c88da37e6a1471d779bc9bdb9"><div class="ttname"><a href="espenc_8c.html#ae56f805c88da37e6a1471d779bc9bdb9">readReg</a></div><div class="ttdeci">static uint16_t readReg(uint8_t address)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00066">espenc.c:66</a></div></div>
<div class="ttc" id="espenc_8c_html_a81a1bda1746cf556eca33a6ab92ea851"><div class="ttname"><a href="espenc_8c.html#a81a1bda1746cf556eca33a6ab92ea851">enc28j60_init</a></div><div class="ttdeci">err_t ICACHE_FLASH_ATTR enc28j60_init(struct netif *netif)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00340">espenc.c:340</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a29fe2ead43354b50de155514f14672ab"><div class="ttname"><a href="eagle__soc_8h.html#a29fe2ead43354b50de155514f14672ab">FUNC_GPIO15</a></div><div class="ttdeci">#define FUNC_GPIO15</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00226">eagle_soc.h:226</a></div></div>
<div class="ttc" id="espenc_8h_html_af22d9ed047710a75f3226e12945e7014"><div class="ttname"><a href="espenc_8h.html#af22d9ed047710a75f3226e12945e7014">ERXFCON_UCEN</a></div><div class="ttdeci">#define ERXFCON_UCEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00101">espenc.h:101</a></div></div>
<div class="ttc" id="c__types_8h_html_afebd45c0d36db732504450393777ce5c"><div class="ttname"><a href="c__types_8h.html#afebd45c0d36db732504450393777ce5c">ICACHE_FLASH_ATTR</a></div><div class="ttdeci">#define ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="c__types_8h_source.html#l00101">c_types.h:101</a></div></div>
<div class="ttc" id="espenc_8h_html_ab5bd94627c03b8c599997934df7f0091"><div class="ttname"><a href="espenc_8h.html#ab5bd94627c03b8c599997934df7f0091">MAADR4</a></div><div class="ttdeci">#define MAADR4</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00090">espenc.h:90</a></div></div>
<div class="ttc" id="espenc_8h_html_a767136e24c87ed51e701f78724ebc78d"><div class="ttname"><a href="espenc_8h.html#a767136e24c87ed51e701f78724ebc78d">ENC28J60_WRITE_BUF_MEM</a></div><div class="ttdeci">#define ENC28J60_WRITE_BUF_MEM</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00223">espenc.h:223</a></div></div>
<div class="ttc" id="espenc_8h_html_a6ca2ed513306c83432028d8ad3d49354"><div class="ttname"><a href="espenc_8h.html#a6ca2ed513306c83432028d8ad3d49354">MICMD</a></div><div class="ttdeci">#define MICMD</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00080">espenc.h:80</a></div></div>
<div class="ttc" id="espenc_8h_html_a76d9284e2250dff140330852fa235da7"><div class="ttname"><a href="espenc_8h.html#a76d9284e2250dff140330852fa235da7">log</a></div><div class="ttdeci">#define log(s,...)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00010">espenc.h:10</a></div></div>
<div class="ttc" id="espenc_8h_html_a01501b400de6174cd44cd52cf9da0950"><div class="ttname"><a href="espenc_8h.html#a01501b400de6174cd44cd52cf9da0950">MACON2</a></div><div class="ttdeci">#define MACON2</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00070">espenc.h:70</a></div></div>
<div class="ttc" id="espenc_8h_html_a48479a2d2567c0d512bd7a3a62a2ed00"><div class="ttname"><a href="espenc_8h.html#a48479a2d2567c0d512bd7a3a62a2ed00">ERXRDPT</a></div><div class="ttdeci">#define ERXRDPT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00039">espenc.h:39</a></div></div>
<div class="ttc" id="espenc_8h_html_a5c468f805202bfc0737c024cbd1be32c"><div class="ttname"><a href="espenc_8h.html#a5c468f805202bfc0737c024cbd1be32c">MICMD_MIIRD</a></div><div class="ttdeci">#define MICMD_MIIRD</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00170">espenc.h:170</a></div></div>
<div class="ttc" id="espenc_8h_html_a59f396f9aefa5b448d786be7dec45cab"><div class="ttname"><a href="espenc_8h.html#a59f396f9aefa5b448d786be7dec45cab">ENC28J60_BIT_FIELD_CLR</a></div><div class="ttdeci">#define ENC28J60_BIT_FIELD_CLR</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00225">espenc.h:225</a></div></div>
<div class="ttc" id="espenc_8h_html_a4d4e73c59441d82b68666731df7759fd"><div class="ttname"><a href="espenc_8h.html#a4d4e73c59441d82b68666731df7759fd">ESP_CS</a></div><div class="ttdeci">#define ESP_CS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00013">espenc.h:13</a></div></div>
<div class="ttc" id="espenc_8h_html_a9cf7f25d840eaf2d2101797ee0e2e29e"><div class="ttname"><a href="espenc_8h.html#a9cf7f25d840eaf2d2101797ee0e2e29e">PHCON2</a></div><div class="ttdeci">#define PHCON2</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00191">espenc.h:191</a></div></div>
<div class="ttc" id="netif_8h_html_aa51f31eb68fa9ca6f0e9e3fbd06b3945"><div class="ttname"><a href="netif_8h.html#aa51f31eb68fa9ca6f0e9e3fbd06b3945">netif_set_up</a></div><div class="ttdeci">void netif_set_up(struct netif *netif) ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="netif_8c_source.html#l00474">netif.c:474</a></div></div>
<div class="ttc" id="gpio_8h_html_a2cc3f29ed0d46de6cbd2f013281881a6"><div class="ttname"><a href="gpio_8h.html#a2cc3f29ed0d46de6cbd2f013281881a6">GPIO_OUTPUT_SET</a></div><div class="ttdeci">#define GPIO_OUTPUT_SET(gpio_no, bit_value)</div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00044">gpio.h:44</a></div></div>
<div class="ttc" id="espenc_8h_html_a7352b390036608eec8d381476b7a7c68"><div class="ttname"><a href="espenc_8h.html#a7352b390036608eec8d381476b7a7c68">ESP_INT</a></div><div class="ttdeci">#define ESP_INT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00014">espenc.h:14</a></div></div>
<div class="ttc" id="espenc_8h_html_ac05b5a98cc41d8736c62a6a96c248940"><div class="ttname"><a href="espenc_8h.html#ac05b5a98cc41d8736c62a6a96c248940">ECON1_BSEL0</a></div><div class="ttdeci">#define ECON1_BSEL0</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00145">espenc.h:145</a></div></div>
<div class="ttc" id="esp-open-sdk_2esp-open-lwip_2include_2netif_2driver_2spi_8h_html"><div class="ttname"><a href="esp-open-sdk_2esp-open-lwip_2include_2netif_2driver_2spi_8h.html">spi.h</a></div></div>
<div class="ttc" id="espenc_8c_html_a0f5c2a11efd2f3a3ba9dd104d632e594"><div class="ttname"><a href="espenc_8c.html#a0f5c2a11efd2f3a3ba9dd104d632e594">swint_Task</a></div><div class="ttdeci">static void swint_Task(os_event_t *events)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00285">espenc.c:285</a></div></div>
<div class="ttc" id="pbuf_8h_html_ab7e0e32fcc292c0d7107721766ed92fbac5e9f28455bca98944a030d4b84ecfab"><div class="ttname"><a href="pbuf_8h.html#ab7e0e32fcc292c0d7107721766ed92fbac5e9f28455bca98944a030d4b84ecfab">PBUF_RAM</a></div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00058">pbuf.h:58</a></div></div>
<div class="ttc" id="espenc_8h_html_a3a2e731dca9ed10137c429b3d2db006f"><div class="ttname"><a href="espenc_8h.html#a3a2e731dca9ed10137c429b3d2db006f">ECON1_TXRTS</a></div><div class="ttdeci">#define ECON1_TXRTS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00142">espenc.h:142</a></div></div>
<div class="ttc" id="espenc_8h_html_ae90f98e596cd117bc03ec08e12303948"><div class="ttname"><a href="espenc_8h.html#ae90f98e596cd117bc03ec08e12303948">MAADR1</a></div><div class="ttdeci">#define MAADR1</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00085">espenc.h:85</a></div></div>
<div class="ttc" id="espenc_8h_html_a92092773c7b76344f6c318f416007f5c"><div class="ttname"><a href="espenc_8h.html#a92092773c7b76344f6c318f416007f5c">MACON3_PADCFG0</a></div><div class="ttdeci">#define MACON3_PADCFG0</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00162">espenc.h:162</a></div></div>
<div class="ttc" id="espenc_8h_html_ab09dce1b21cca7564099bf5c2977027d"><div class="ttname"><a href="espenc_8h.html#ab09dce1b21cca7564099bf5c2977027d">MAADR5</a></div><div class="ttdeci">#define MAADR5</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00089">espenc.h:89</a></div></div>
<div class="ttc" id="espenc_8h_html_a30fc7709c1cdffc38bd8949480456470"><div class="ttname"><a href="espenc_8h.html#a30fc7709c1cdffc38bd8949480456470">RXSTART_INIT</a></div><div class="ttdeci">#define RXSTART_INIT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00239">espenc.h:239</a></div></div>
<div class="ttc" id="spi_8c_html_ab1b1ee052705fb788f5f312bb5dff9b3"><div class="ttname"><a href="spi_8c.html#ab1b1ee052705fb788f5f312bb5dff9b3">spi_init</a></div><div class="ttdeci">ICACHE_FLASH_ATTR void spi_init(uint8 spi_no)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00038">spi.c:38</a></div></div>
<div class="ttc" id="espenc_8h_html_af193c0a7f0208c18b1d49668e68266e0"><div class="ttname"><a href="espenc_8h.html#af193c0a7f0208c18b1d49668e68266e0">EIR_TXIF</a></div><div class="ttdeci">#define EIR_TXIF</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00122">espenc.h:122</a></div></div>
<div class="ttc" id="espenc_8h_html_ac60597badc76e6f2c5ce64d862746c67"><div class="ttname"><a href="espenc_8h.html#ac60597badc76e6f2c5ce64d862746c67">BANK_MASK</a></div><div class="ttdeci">#define BANK_MASK</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00024">espenc.h:24</a></div></div>
<div class="ttc" id="espenc_8h_html_af659fef7d667a4aef848535ca3d47e29"><div class="ttname"><a href="espenc_8h.html#af659fef7d667a4aef848535ca3d47e29">ERXST</a></div><div class="ttdeci">#define ERXST</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00037">espenc.h:37</a></div></div>
<div class="ttc" id="espenc_8h_html_aa9108e0c4b3004b06668c1f213cbfbad"><div class="ttname"><a href="espenc_8h.html#aa9108e0c4b3004b06668c1f213cbfbad">TXSTART_INIT</a></div><div class="ttdeci">#define TXSTART_INIT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00242">espenc.h:242</a></div></div>
<div class="ttc" id="espenc_8c_html_aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07"><div class="ttname"><a href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127ae7e11ad2dc67ea83048740d460f76b07">SIG_NETIF_POLL</a></div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00012">espenc.c:12</a></div></div>
<div class="ttc" id="ets__sys_8h_html_a3b7131effc447b874d53608df1093c9d"><div class="ttname"><a href="ets__sys_8h.html#a3b7131effc447b874d53608df1093c9d">ETS_GPIO_INTR_ATTACH</a></div><div class="ttdeci">#define ETS_GPIO_INTR_ATTACH(func, arg)</div><div class="ttdef"><b>Definition:</b> <a href="ets__sys_8h_source.html#l00088">ets_sys.h:88</a></div></div>
<div class="ttc" id="pbuf_8h_html_aee1baa59bb2f85ba575b5a8619ac1ebfab4de441e737330558b609a990cd17346"><div class="ttname"><a href="pbuf_8h.html#aee1baa59bb2f85ba575b5a8619ac1ebfab4de441e737330558b609a990cd17346">PBUF_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00053">pbuf.h:53</a></div></div>
<div class="ttc" id="espenc_8c_html_afc8b567eea1195c5b5c38c16aa7d6871"><div class="ttname"><a href="espenc_8c.html#afc8b567eea1195c5b5c38c16aa7d6871">swint_TaskPrio</a></div><div class="ttdeci">#define swint_TaskPrio</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00016">espenc.c:16</a></div></div>
<div class="ttc" id="espenc_8h_html_a01fb4e4ea7a7b71cbf2b341b0ebd77a3"><div class="ttname"><a href="espenc_8h.html#a01fb4e4ea7a7b71cbf2b341b0ebd77a3">MIREGADR</a></div><div class="ttdeci">#define MIREGADR</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00081">espenc.h:81</a></div></div>
<div class="ttc" id="structnetif_html_afe1181561cb16241f3cb5ed01e567d42"><div class="ttname"><a href="structnetif.html#afe1181561cb16241f3cb5ed01e567d42">netif::hwaddr_len</a></div><div class="ttdeci">u8_t hwaddr_len</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00189">netif.h:189</a></div></div>
<div class="ttc" id="osapi_8h_html_a751d204d0c7e166a527475d79e803454"><div class="ttname"><a href="osapi_8h.html#a751d204d0c7e166a527475d79e803454">os_printf</a></div><div class="ttdeci">#define os_printf</div><div class="ttdef"><b>Definition:</b> <a href="osapi_8h_source.html#l00092">osapi.h:92</a></div></div>
<div class="ttc" id="gpio_8h_html_a261b2551d50fb5faeff9abede9738546"><div class="ttname"><a href="gpio_8h.html#a261b2551d50fb5faeff9abede9738546">GPIO_PIN_ADDR</a></div><div class="ttdeci">#define GPIO_PIN_ADDR(i)</div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00028">gpio.h:28</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a411ba054f4eb8f22ac441f8bf5734d78"><div class="ttname"><a href="eagle__soc_8h.html#a411ba054f4eb8f22ac441f8bf5734d78">GPIO_REG_READ</a></div><div class="ttdeci">#define GPIO_REG_READ(reg)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00097">eagle_soc.h:97</a></div></div>
<div class="ttc" id="espenc_8h_html_a12821080889b4c07b4d6592fbcb67aca"><div class="ttname"><a href="espenc_8h.html#a12821080889b4c07b4d6592fbcb67aca">MAADR2</a></div><div class="ttdeci">#define MAADR2</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00088">espenc.h:88</a></div></div>
<div class="ttc" id="os__type_8h_html_a31c610c4705c01b07e272852f4bd17ca"><div class="ttname"><a href="os__type_8h.html#a31c610c4705c01b07e272852f4bd17ca">os_event_t</a></div><div class="ttdeci">#define os_event_t</div><div class="ttdef"><b>Definition:</b> <a href="os__type_8h_source.html#l00032">os_type.h:32</a></div></div>
<div class="ttc" id="espenc_8c_html_a655fbec696cb6a8e30069f066615d830"><div class="ttname"><a href="espenc_8c.html#a655fbec696cb6a8e30069f066615d830">readOp</a></div><div class="ttdeci">uint8_t readOp(uint8_t op, uint8_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00039">espenc.c:39</a></div></div>
<div class="ttc" id="espenc_8h_html_a0aa3bb65f69bc921f3b4020410f7efc2"><div class="ttname"><a href="espenc_8h.html#a0aa3bb65f69bc921f3b4020410f7efc2">MABBIPG</a></div><div class="ttdeci">#define MABBIPG</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00073">espenc.h:73</a></div></div>
<div class="ttc" id="ets__sys_8h_html_af69975ab315b652862825f9929e436c0"><div class="ttname"><a href="ets__sys_8h.html#af69975ab315b652862825f9929e436c0">ETSParam</a></div><div class="ttdeci">uint32_t ETSParam</div><div class="ttdef"><b>Definition:</b> <a href="ets__sys_8h_source.html#l00032">ets_sys.h:32</a></div></div>
<div class="ttc" id="tcpip_8h_html_a7eb868a1215472ec38f3f2a04d442b9f"><div class="ttname"><a href="tcpip_8h.html#a7eb868a1215472ec38f3f2a04d442b9f">tcpip_callback</a></div><div class="ttdeci">#define tcpip_callback(f, ctx)</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l00099">tcpip.h:99</a></div></div>
<div class="ttc" id="osapi_8h_html_ac5c79bf463c8eba708ea34fccc8ec7c1"><div class="ttname"><a href="osapi_8h.html#ac5c79bf463c8eba708ea34fccc8ec7c1">os_memcpy</a></div><div class="ttdeci">#define os_memcpy</div><div class="ttdef"><b>Definition:</b> <a href="osapi_8h_source.html#l00053">osapi.h:53</a></div></div>
<div class="ttc" id="espenc_8h_html_a47ff0cb1c26fb850f8a241a472817b03"><div class="ttname"><a href="espenc_8h.html#a47ff0cb1c26fb850f8a241a472817b03">ETXND</a></div><div class="ttdeci">#define ETXND</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00036">espenc.h:36</a></div></div>
<div class="ttc" id="espenc_8c_html_af925f259879dbba7c5d7b0eab062b34b"><div class="ttname"><a href="espenc_8c.html#af925f259879dbba7c5d7b0eab062b34b">readRegByte</a></div><div class="ttdeci">static uint8_t readRegByte(uint8_t address)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00061">espenc.c:61</a></div></div>
<div class="ttc" id="user__interface_8h_html_a7c5f9848e9291e4ccb9dbbfaad452e9d"><div class="ttname"><a href="user__interface_8h.html#a7c5f9848e9291e4ccb9dbbfaad452e9d">system_os_task</a></div><div class="ttdeci">bool system_os_task(os_task_t task, uint8 prio, os_event_t *queue, uint8 qlen)</div></div>
<div class="ttc" id="eagle__soc_8h_html_a6794e1912ddba03a1e154af6ceb85486"><div class="ttname"><a href="eagle__soc_8h.html#a6794e1912ddba03a1e154af6ceb85486">GPIO_REG_WRITE</a></div><div class="ttdeci">#define GPIO_REG_WRITE(reg, val)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00098">eagle_soc.h:98</a></div></div>
<div class="ttc" id="espenc_8h_html_aa0148f7ca7a2f103f153ce5d0b5030dd"><div class="ttname"><a href="espenc_8h.html#aa0148f7ca7a2f103f153ce5d0b5030dd">EPMCS</a></div><div class="ttdeci">#define EPMCS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00062">espenc.h:62</a></div></div>
<div class="ttc" id="espenc_8h_html_a06154d588a4de88a36a07d4a840df794"><div class="ttname"><a href="espenc_8h.html#a06154d588a4de88a36a07d4a840df794">MAIPG</a></div><div class="ttdeci">#define MAIPG</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00074">espenc.h:74</a></div></div>
<div class="ttc" id="espenc_8h_html_a6e7ec3932ab30e65b5ea60440053a4bc"><div class="ttname"><a href="espenc_8h.html#a6e7ec3932ab30e65b5ea60440053a4bc">EIE_INTIE</a></div><div class="ttdeci">#define EIE_INTIE</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00110">espenc.h:110</a></div></div>
<div class="ttc" id="c__types_8h_html_a4eaf4bf81c52c3f375967906e4d5ba17"><div class="ttname"><a href="c__types_8h.html#a4eaf4bf81c52c3f375967906e4d5ba17">BIT</a></div><div class="ttdeci">#define BIT(nr)</div><div class="ttdef"><b>Definition:</b> <a href="c__types_8h_source.html#l00089">c_types.h:89</a></div></div>
<div class="ttc" id="structnetif_html_a353875b68ea303d237d1c3406134ec76"><div class="ttname"><a href="structnetif.html#a353875b68ea303d237d1c3406134ec76">netif::gw</a></div><div class="ttdeci">ip_addr_t gw</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00146">netif.h:146</a></div></div>
<div class="ttc" id="gpio_8h_html_a6f9e27f786736a857f19c93ab7f7ebbaa5d849d662c8b715252b3905ed9d7f777"><div class="ttname"><a href="gpio_8h.html#a6f9e27f786736a857f19c93ab7f7ebbaa5d849d662c8b715252b3905ed9d7f777">GPIO_PIN_INTR_LOLEVEL</a></div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00040">gpio.h:40</a></div></div>
<div class="ttc" id="netif_8h_html_a92448dc510bc8d700c09e5c971ef0676"><div class="ttname"><a href="netif_8h.html#a92448dc510bc8d700c09e5c971ef0676">NETIF_FLAG_ETHARP</a></div><div class="ttdeci">#define NETIF_FLAG_ETHARP</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00088">netif.h:88</a></div></div>
<div class="ttc" id="spi_8c_html_aaf27c8705f9b667677d7c5f923c0333d"><div class="ttname"><a href="spi_8c.html#aaf27c8705f9b667677d7c5f923c0333d">spi_mode</a></div><div class="ttdeci">ICACHE_FLASH_ATTR void spi_mode(uint8 spi_no, uint8 spi_cpha, uint8 spi_cpol)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00067">spi.c:67</a></div></div>
<div class="ttc" id="espenc_8h_html_a303aba585a8da3f8dc80315dc94cb0e5"><div class="ttname"><a href="espenc_8h.html#a303aba585a8da3f8dc80315dc94cb0e5">EIR</a></div><div class="ttdeci">#define EIR</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00028">espenc.h:28</a></div></div>
<div class="ttc" id="espenc_8h_html_a461b29cd8a06dc2f331f664eb0f9165a"><div class="ttname"><a href="espenc_8h.html#a461b29cd8a06dc2f331f664eb0f9165a">ECON1</a></div><div class="ttdeci">#define ECON1</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00031">espenc.h:31</a></div></div>
<div class="ttc" id="structnetif_html_ae77736b64df442242795220d76be6b86"><div class="ttname"><a href="structnetif.html#ae77736b64df442242795220d76be6b86">netif::next</a></div><div class="ttdeci">struct netif * next</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00141">netif.h:141</a></div></div>
<div class="ttc" id="espenc_8h_html_a120bccb0df5d68a311c7030cfb96cb60"><div class="ttname"><a href="espenc_8h.html#a120bccb0df5d68a311c7030cfb96cb60">MAADR0</a></div><div class="ttdeci">#define MAADR0</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00086">espenc.h:86</a></div></div>
<div class="ttc" id="err_8h_html_a98c763adfeea8e9831c46ec269e47ae9"><div class="ttname"><a href="err_8h.html#a98c763adfeea8e9831c46ec269e47ae9">ERR_OK</a></div><div class="ttdeci">#define ERR_OK</div><div class="ttdef"><b>Definition:</b> <a href="err_8h_source.html#l00052">err.h:52</a></div></div>
<div class="ttc" id="espenc_8c_html_adceb70824575ddd16eb054c04849075a"><div class="ttname"><a href="espenc_8c.html#adceb70824575ddd16eb054c04849075a">NextPacketPtr</a></div><div class="ttdeci">static uint16_t NextPacketPtr</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00022">espenc.c:22</a></div></div>
<div class="ttc" id="espenc_8c_html_ad0cf56e58c144027cb08718d5c7ad940"><div class="ttname"><a href="espenc_8c.html#ad0cf56e58c144027cb08718d5c7ad940">swint_TaskQueue</a></div><div class="ttdeci">os_event_t swint_TaskQueue[swint_TaskQueueLen]</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00018">espenc.c:18</a></div></div>
<div class="ttc" id="espenc_8c_html_a6ecb8f6586d0012d3096e9f091db8629"><div class="ttname"><a href="espenc_8c.html#a6ecb8f6586d0012d3096e9f091db8629">handling_int</a></div><div class="ttdeci">static volatile bool handling_int</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00024">espenc.c:24</a></div></div>
<div class="ttc" id="espenc_8h_html_a1b56128234d0790b0d7253f4357d2adb"><div class="ttname"><a href="espenc_8h.html#a1b56128234d0790b0d7253f4357d2adb">ERXFCON_BCEN</a></div><div class="ttdeci">#define ERXFCON_BCEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00108">espenc.h:108</a></div></div>
<div class="ttc" id="structpbuf_html"><div class="ttname"><a href="structpbuf.html">pbuf</a></div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00076">pbuf.h:76</a></div></div>
<div class="ttc" id="structnetif_html_a1c171db6097bbb6f09f63549a66e00ea"><div class="ttname"><a href="structnetif.html#a1c171db6097bbb6f09f63549a66e00ea">netif::flags</a></div><div class="ttdeci">u8_t flags</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00193">netif.h:193</a></div></div>
<div class="ttc" id="espenc_8h_html_aad379004aeaf17af6de1ecdf580bc185"><div class="ttname"><a href="espenc_8h.html#aad379004aeaf17af6de1ecdf580bc185">MIRD</a></div><div class="ttdeci">#define MIRD</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00083">espenc.h:83</a></div></div>
<div class="ttc" id="netif_8h_html_aef64fe15c82bc7b235366923e517104e"><div class="ttname"><a href="netif_8h.html#aef64fe15c82bc7b235366923e517104e">NETIF_FLAG_BROADCAST</a></div><div class="ttdeci">#define NETIF_FLAG_BROADCAST</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00072">netif.h:72</a></div></div>
<div class="ttc" id="sdk_2include_2mem_8h_html"><div class="ttname"><a href="sdk_2include_2mem_8h.html">mem.h</a></div></div>
<div class="ttc" id="err_8h_html_af02d9da80fd66b4f986d2c53d7231ddb"><div class="ttname"><a href="err_8h.html#af02d9da80fd66b4f986d2c53d7231ddb">err_t</a></div><div class="ttdeci">s8_t err_t</div><div class="ttdef"><b>Definition:</b> <a href="err_8h_source.html#l00047">err.h:47</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_aa21d642e6874b9df89f9e404574d62a9"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#aa21d642e6874b9df89f9e404574d62a9">ip_addr_t</a></div><div class="ttdeci">typedefPACK_STRUCT_END struct ip_addr ip_addr_t</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00064">ip_addr.h:64</a></div></div>
<div class="ttc" id="espenc_8h_html_a1171f52b3a35649112ce502a26834bdd"><div class="ttname"><a href="espenc_8h.html#a1171f52b3a35649112ce502a26834bdd">EIE_PKTIE</a></div><div class="ttdeci">#define EIE_PKTIE</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00111">espenc.h:111</a></div></div>
<div class="ttc" id="espenc_8h_html_ab1b6d259b563e0360243658157a023b2"><div class="ttname"><a href="espenc_8h.html#ab1b6d259b563e0360243658157a023b2">ENC28J60_WRITE_CTRL_REG</a></div><div class="ttdeci">#define ENC28J60_WRITE_CTRL_REG</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00222">espenc.h:222</a></div></div>
<div class="ttc" id="espenc_8h_html_a3b13c70f7318bbdfec1c49d048f7610a"><div class="ttname"><a href="espenc_8h.html#a3b13c70f7318bbdfec1c49d048f7610a">PHCON1_PRST</a></div><div class="ttdeci">#define PHCON1_PRST</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00198">espenc.h:198</a></div></div>
<div class="ttc" id="structnetif_html"><div class="ttname"><a href="structnetif.html">netif</a></div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00139">netif.h:139</a></div></div>
<div class="ttc" id="espenc_8h_html_a86d77e305cc8d23f335fb733870a873c"><div class="ttname"><a href="espenc_8h.html#a86d77e305cc8d23f335fb733870a873c">ECON2</a></div><div class="ttdeci">#define ECON2</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00030">espenc.h:30</a></div></div>
<div class="ttc" id="espenc_8c_html_a89cd52367e9b45f6d73b2b562b5be92d"><div class="ttname"><a href="espenc_8c.html#a89cd52367e9b45f6d73b2b562b5be92d">readBuf</a></div><div class="ttdeci">static void readBuf(uint16_t len, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00094">espenc.c:94</a></div></div>
<div class="ttc" id="espenc_8h_html_ac491e02aff4b227289f14f7b98c0ab35"><div class="ttname"><a href="espenc_8h.html#ac491e02aff4b227289f14f7b98c0ab35">ERXFCON_PMEN</a></div><div class="ttdeci">#define ERXFCON_PMEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00104">espenc.h:104</a></div></div>
<div class="ttc" id="espenc_8h_html_adab05794c311d260abaaec301a942be5"><div class="ttname"><a href="espenc_8h.html#adab05794c311d260abaaec301a942be5">MAADR3</a></div><div class="ttdeci">#define MAADR3</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00087">espenc.h:87</a></div></div>
<div class="ttc" id="espenc_8h_html_a56c95e39fee5469165e12011658d6b0d"><div class="ttname"><a href="espenc_8h.html#a56c95e39fee5469165e12011658d6b0d">MIWR</a></div><div class="ttdeci">#define MIWR</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00082">espenc.h:82</a></div></div>
<div class="ttc" id="espenc_8c_html_a2239a3e52452ed0f0cd757d4ce5e4c05"><div class="ttname"><a href="espenc_8c.html#a2239a3e52452ed0f0cd757d4ce5e4c05">chipEnable</a></div><div class="ttdeci">void ICACHE_FLASH_ATTR chipEnable()</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00026">espenc.c:26</a></div></div>
<div class="ttc" id="espenc_8h_html_a9cbf4c5171f6d945f142b8150aaf9c0e"><div class="ttname"><a href="espenc_8h.html#a9cbf4c5171f6d945f142b8150aaf9c0e">MACON3_FRMLNEN</a></div><div class="ttdeci">#define MACON3_FRMLNEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00166">espenc.h:166</a></div></div>
<div class="ttc" id="espenc_8h_html_a66297d20ff1a92778edc575b8d7a6659"><div class="ttname"><a href="espenc_8h.html#a66297d20ff1a92778edc575b8d7a6659">EIR_TXERIF</a></div><div class="ttdeci">#define EIR_TXERIF</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00124">espenc.h:124</a></div></div>
<div class="ttc" id="sdk_2include_2mem_8h_html_aeca859cafb7f4c2eed341334a2c2e97c"><div class="ttname"><a href="sdk_2include_2mem_8h.html#aeca859cafb7f4c2eed341334a2c2e97c">os_free</a></div><div class="ttdeci">#define os_free(s)</div><div class="ttdef"><b>Definition:</b> <a href="sdk_2include_2mem_8h_source.html#l00052">mem.h:52</a></div></div>
<div class="ttc" id="ets__sys_8h_html_aa8e36bac2666a375c6ce428a88625b4a"><div class="ttname"><a href="ets__sys_8h.html#aa8e36bac2666a375c6ce428a88625b4a">ETS_GPIO_INTR_ENABLE</a></div><div class="ttdeci">#define ETS_GPIO_INTR_ENABLE()</div><div class="ttdef"><b>Definition:</b> <a href="ets__sys_8h_source.html#l00115">ets_sys.h:115</a></div></div>
<div class="ttc" id="espenc_8c_html_af8db9f52e4e9f706cfe4d27c390f8f60"><div class="ttname"><a href="espenc_8c.html#af8db9f52e4e9f706cfe4d27c390f8f60">interrupt_reg</a></div><div class="ttdeci">static uint32_t interrupt_reg</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00191">espenc.c:191</a></div></div>
<div class="ttc" id="espenc_8h_html_a73e8f004b429cdbc2161d418b8e2e4c2"><div class="ttname"><a href="espenc_8h.html#a73e8f004b429cdbc2161d418b8e2e4c2">MACON3_TXCRCEN</a></div><div class="ttdeci">#define MACON3_TXCRCEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00163">espenc.h:163</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a460a2f20474db259508bdcdbf65d32c7"><div class="ttname"><a href="eagle__soc_8h.html#a460a2f20474db259508bdcdbf65d32c7">GPIO_PAD_DRIVER_DISABLE</a></div><div class="ttdeci">#define GPIO_PAD_DRIVER_DISABLE</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00152">eagle_soc.h:152</a></div></div>
<div class="ttc" id="espenc_8c_html_a8c943d8572dd5e4f9236db5752ca4e03"><div class="ttname"><a href="espenc_8c.html#a8c943d8572dd5e4f9236db5752ca4e03">inint</a></div><div class="ttdeci">static volatile bool inint</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00023">espenc.c:23</a></div></div>
<div class="ttc" id="structnetif_html_aca7d56b4e0f822b0ced2885f222b8d48"><div class="ttname"><a href="structnetif.html#aca7d56b4e0f822b0ced2885f222b8d48">netif::mtu</a></div><div class="ttdeci">u16_t mtu</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00187">netif.h:187</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a2cbaa3bc29b2f9c3c048839fb87214a5"><div class="ttname"><a href="eagle__soc_8h.html#a2cbaa3bc29b2f9c3c048839fb87214a5">PERIPHS_IO_MUX_MTDO_U</a></div><div class="ttdeci">#define PERIPHS_IO_MUX_MTDO_U</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00225">eagle_soc.h:225</a></div></div>
<div class="ttc" id="espenc_8c_html_a7e04e867e5a788903adaca29045aa118"><div class="ttname"><a href="espenc_8c.html#a7e04e867e5a788903adaca29045aa118">SetBank</a></div><div class="ttdeci">static void SetBank(uint8_t address)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00052">espenc.c:52</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html">ip_addr.h</a></div></div>
<div class="ttc" id="espenc_8h_html_acc0affa8c69ea2a90c8ffa6b50764c30"><div class="ttname"><a href="espenc_8h.html#acc0affa8c69ea2a90c8ffa6b50764c30">ETXST</a></div><div class="ttdeci">#define ETXST</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00035">espenc.h:35</a></div></div>
<div class="ttc" id="espenc_8c_html_a9d611c4427db4d7a829e299162eea77b"><div class="ttname"><a href="espenc_8c.html#a9d611c4427db4d7a829e299162eea77b">swint_TaskQueueLen</a></div><div class="ttdeci">#define swint_TaskQueueLen</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00017">espenc.c:17</a></div></div>
<div class="ttc" id="c__types_8h_html_a1134b580f8da4de94ca6b1de4d37975e"><div class="ttname"><a href="c__types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdef"><b>Definition:</b> <a href="c__types_8h_source.html#l00054">c_types.h:54</a></div></div>
<div class="ttc" id="osapi_8h_html_a202cca9b5478fe03db5aebd09b23b8dc"><div class="ttname"><a href="osapi_8h.html#a202cca9b5478fe03db5aebd09b23b8dc">os_delay_us</a></div><div class="ttdeci">#define os_delay_us</div><div class="ttdef"><b>Definition:</b> <a href="osapi_8h_source.html#l00037">osapi.h:37</a></div></div>
<div class="ttc" id="espenc_8h_html_a81c320643a8fcfb3c91f4e059a14c2c0"><div class="ttname"><a href="espenc_8h.html#a81c320643a8fcfb3c91f4e059a14c2c0">ECON1_BSEL1</a></div><div class="ttdeci">#define ECON1_BSEL1</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00144">espenc.h:144</a></div></div>
<div class="ttc" id="espenc_8h_html_abd6aab564bb58e789243684804aff335"><div class="ttname"><a href="espenc_8h.html#abd6aab564bb58e789243684804aff335">MISTAT</a></div><div class="ttdeci">#define MISTAT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00094">espenc.h:94</a></div></div>
<div class="ttc" id="cc_8h_html_a09658c138f072b24ba5ea0cf04efc7d4"><div class="ttname"><a href="cc_8h.html#a09658c138f072b24ba5ea0cf04efc7d4">SYS_ARCH_PROTECT</a></div><div class="ttdeci">#define SYS_ARCH_PROTECT(x)</div><div class="ttdef"><b>Definition:</b> <a href="cc_8h_source.html#l00087">cc.h:87</a></div></div>
<div class="ttc" id="espenc_8c_html_a55dfa017402fc9454bf75d0536cb2425"><div class="ttname"><a href="espenc_8c.html#a55dfa017402fc9454bf75d0536cb2425">enc_scoop_packets</a></div><div class="ttdeci">void enc_scoop_packets(void)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00269">espenc.c:269</a></div></div>
<div class="ttc" id="espenc_8h_html_a119009b9b272e3785b7f77a307295303"><div class="ttname"><a href="espenc_8h.html#a119009b9b272e3785b7f77a307295303">MAMXFL</a></div><div class="ttdeci">#define MAMXFL</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00077">espenc.h:77</a></div></div>
<div class="ttc" id="espenc_8h_html_ac5ff36d9b43977e5dd6548170ec93ddc"><div class="ttname"><a href="espenc_8h.html#ac5ff36d9b43977e5dd6548170ec93ddc">ERXFCON</a></div><div class="ttdeci">#define ERXFCON</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00066">espenc.h:66</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a6b11e18130f19dba26eb75d4ca443bb2"><div class="ttname"><a href="eagle__soc_8h.html#a6b11e18130f19dba26eb75d4ca443bb2">GPIO_PIN_INT_TYPE_SET</a></div><div class="ttdeci">#define GPIO_PIN_INT_TYPE_SET(x)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00149">eagle_soc.h:149</a></div></div>
<div class="ttc" id="espenc_8h_html_a671b1bccaaf1d135073b3604c85a8ff2"><div class="ttname"><a href="espenc_8h.html#a671b1bccaaf1d135073b3604c85a8ff2">ECON1_TXRST</a></div><div class="ttdeci">#define ECON1_TXRST</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00138">espenc.h:138</a></div></div>
<div class="ttc" id="espenc_8h_html_ace8508fae6ed0c6d29e8879194de5fbc"><div class="ttname"><a href="espenc_8h.html#ace8508fae6ed0c6d29e8879194de5fbc">ECON1_RXEN</a></div><div class="ttdeci">#define ECON1_RXEN</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00143">espenc.h:143</a></div></div>
<div class="ttc" id="sdk_2include_2mem_8h_html_ab5bd4ba214011254e942752390f4be00"><div class="ttname"><a href="sdk_2include_2mem_8h.html#ab5bd4ba214011254e942752390f4be00">os_malloc</a></div><div class="ttdeci">#define os_malloc</div><div class="ttdef"><b>Definition:</b> <a href="sdk_2include_2mem_8h_source.html#l00118">mem.h:118</a></div></div>
<div class="ttc" id="espenc_8h_html_a72ac42db94893a565a52821f5ae95856"><div class="ttname"><a href="espenc_8h.html#a72ac42db94893a565a52821f5ae95856">EIE</a></div><div class="ttdeci">#define EIE</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00027">espenc.h:27</a></div></div>
<div class="ttc" id="espenc_8h_html_a2df968e548600d1a94988d3fa73f9a90"><div class="ttname"><a href="espenc_8h.html#a2df968e548600d1a94988d3fa73f9a90">ENC28J60_READ_BUF_MEM</a></div><div class="ttdeci">#define ENC28J60_READ_BUF_MEM</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00221">espenc.h:221</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a745ea801997a9a14f81f3ed671b018cd"><div class="ttname"><a href="eagle__soc_8h.html#a745ea801997a9a14f81f3ed671b018cd">GPIO_STATUS_W1TC_ADDRESS</a></div><div class="ttdeci">#define GPIO_STATUS_W1TC_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00112">eagle_soc.h:112</a></div></div>
<div class="ttc" id="espenc_8c_html_aecf2d3bf4538bec088e475785319c127a1fe44827a31427c3ee7e20ba03e42a76"><div class="ttname"><a href="espenc_8c.html#aecf2d3bf4538bec088e475785319c127a1fe44827a31427c3ee7e20ba03e42a76">SIG_DO_NOTHING</a></div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00011">espenc.c:11</a></div></div>
<div class="ttc" id="structnetif_html_a8fe4f1b7b0d710216287da9615164a5c"><div class="ttname"><a href="structnetif.html#a8fe4f1b7b0d710216287da9615164a5c">netif::input</a></div><div class="ttdeci">netif_input_fn input</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00150">netif.h:150</a></div></div>
<div class="ttc" id="esp-open-sdk_2esp-open-lwip_2include_2lwip_2debug_8h_html_a94ad086267808462beae2b38f91996ed"><div class="ttname"><a href="esp-open-sdk_2esp-open-lwip_2include_2lwip_2debug_8h.html#a94ad086267808462beae2b38f91996ed">LWIP_ASSERT</a></div><div class="ttdeci">#define LWIP_ASSERT(message, assertion)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-sdk_2esp-open-lwip_2include_2lwip_2debug_8h_source.html#l00066">debug.h:66</a></div></div>
<div class="ttc" id="structpbuf_html_a8d32dc3e964369d4eec638fc37fbc460"><div class="ttname"><a href="structpbuf.html#a8d32dc3e964369d4eec638fc37fbc460">pbuf::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8h_source.html#l00081">pbuf.h:81</a></div></div>
<div class="ttc" id="espenc_8c_html_a9dde37e22459a5eb9237e0b3bd7b2fa8"><div class="ttname"><a href="espenc_8c.html#a9dde37e22459a5eb9237e0b3bd7b2fa8">writeRegByte</a></div><div class="ttdeci">static void writeRegByte(uint8_t address, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00070">espenc.c:70</a></div></div>
<div class="ttc" id="pbuf_8h_html_ab0a418a2392133e6b18c7b19f7c04500"><div class="ttname"><a href="pbuf_8h.html#ab0a418a2392133e6b18c7b19f7c04500">pbuf_copy_partial</a></div><div class="ttdeci">u16_t pbuf_copy_partial(struct pbuf *p, void *dataptr, u16_t len, u16_t offset) ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8c_source.html#l00996">pbuf.c:996</a></div></div>
<div class="ttc" id="espenc_8h_html_aec37b8c76a880a3c2b8205920f8b911d"><div class="ttname"><a href="espenc_8h.html#aec37b8c76a880a3c2b8205920f8b911d">PHSTAT2</a></div><div class="ttdeci">#define PHSTAT2</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00192">espenc.h:192</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_a7c875e005fa8a05a07bcdb7d81972235"><div class="ttname"><a href="eagle__soc_8h.html#a7c875e005fa8a05a07bcdb7d81972235">GPIO_PIN_SOURCE_SET</a></div><div class="ttdeci">#define GPIO_PIN_SOURCE_SET(x)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00165">eagle_soc.h:165</a></div></div>
<div class="ttc" id="structnetif_html_a32fca6ffd28bb9af3f891a378827a67e"><div class="ttname"><a href="structnetif.html#a32fca6ffd28bb9af3f891a378827a67e">netif::name</a></div><div class="ttdeci">char name[2]</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00195">netif.h:195</a></div></div>
<div class="ttc" id="espenc_8c_html_a6e1c907e7ece2b9b08be005d9a78089c"><div class="ttname"><a href="espenc_8c.html#a6e1c907e7ece2b9b08be005d9a78089c">interrupt_handler</a></div><div class="ttdeci">void interrupt_handler(void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00307">espenc.c:307</a></div></div>
<div class="ttc" id="espenc_8c_html_abc96fe33660001538919e64fc237796f"><div class="ttname"><a href="espenc_8c.html#abc96fe33660001538919e64fc237796f">enc28j60_link_output</a></div><div class="ttdeci">err_t ICACHE_FLASH_ATTR enc28j60_link_output(struct netif *netif, struct pbuf *p)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00122">espenc.c:122</a></div></div>
<div class="ttc" id="espenc_8h_html_a37e80f66673c39e7db383e0b11a159ea"><div class="ttname"><a href="espenc_8h.html#a37e80f66673c39e7db383e0b11a159ea">MACON3</a></div><div class="ttdeci">#define MACON3</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00071">espenc.h:71</a></div></div>
<div class="ttc" id="eagle__soc_8h_html_af8ecde3ecafe222e9aa837122325e3da"><div class="ttname"><a href="eagle__soc_8h.html#af8ecde3ecafe222e9aa837122325e3da">GPIO_PIN_PAD_DRIVER_SET</a></div><div class="ttdeci">#define GPIO_PIN_PAD_DRIVER_SET(x)</div><div class="ttdef"><b>Definition:</b> <a href="eagle__soc_8h_source.html#l00157">eagle_soc.h:157</a></div></div>
<div class="ttc" id="espenc_8h_html_ab64add14e73a7308bd32343c45caf79d"><div class="ttname"><a href="espenc_8h.html#ab64add14e73a7308bd32343c45caf79d">MACON1</a></div><div class="ttdeci">#define MACON1</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00069">espenc.h:69</a></div></div>
<div class="ttc" id="espenc_8h_html_aa9add9ea9c8ec92be8d2a159e6d3cdfa"><div class="ttname"><a href="espenc_8h.html#aa9add9ea9c8ec92be8d2a159e6d3cdfa">EWRPT</a></div><div class="ttdeci">#define EWRPT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00034">espenc.h:34</a></div></div>
<div class="ttc" id="espenc_8c_html_a71974e03579618499dd6d7ff4fa51cc6"><div class="ttname"><a href="espenc_8c.html#a71974e03579618499dd6d7ff4fa51cc6">Enc28j60Bank</a></div><div class="ttdeci">static uint8_t Enc28j60Bank</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00021">espenc.c:21</a></div></div>
<div class="ttc" id="espenc_8h_html_af19457b6e7f2859f8ef8d7eff7867c65"><div class="ttname"><a href="espenc_8h.html#af19457b6e7f2859f8ef8d7eff7867c65">ENC28J60_BIT_FIELD_SET</a></div><div class="ttdeci">#define ENC28J60_BIT_FIELD_SET</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00224">espenc.h:224</a></div></div>
<div class="ttc" id="espenc_8h_html_a67f4baba49a56729548246a2c4cf60c4"><div class="ttname"><a href="espenc_8h.html#a67f4baba49a56729548246a2c4cf60c4">PHCON2_HDLDIS</a></div><div class="ttdeci">#define PHCON2_HDLDIS</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00211">espenc.h:211</a></div></div>
<div class="ttc" id="espenc_8h_html_a410181bf68959f297703e3afdf73454b"><div class="ttname"><a href="espenc_8h.html#a410181bf68959f297703e3afdf73454b">RXSTOP_INIT</a></div><div class="ttdeci">#define RXSTOP_INIT</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00240">espenc.h:240</a></div></div>
<div class="ttc" id="espenc_8c_html_af50077520ab35a01792daf94a89c5b9a"><div class="ttname"><a href="espenc_8c.html#af50077520ab35a01792daf94a89c5b9a">writeReg</a></div><div class="ttdeci">static void writeReg(uint8_t address, uint16_t data)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00075">espenc.c:75</a></div></div>
<div class="ttc" id="cc_8h_html_a985dd6a54f63dec5ee774ac395165511"><div class="ttname"><a href="cc_8h.html#a985dd6a54f63dec5ee774ac395165511">SYS_ARCH_UNPROTECT</a></div><div class="ttdeci">#define SYS_ARCH_UNPROTECT(x)</div><div class="ttdef"><b>Definition:</b> <a href="cc_8h_source.html#l00088">cc.h:88</a></div></div>
<div class="ttc" id="_meter_logger_2include_2driver_2spi_8h_html_a7cf63bf62083f88011da27189bdbbb66"><div class="ttname"><a href="_meter_logger_2include_2driver_2spi_8h.html#a7cf63bf62083f88011da27189bdbbb66">spi_busy</a></div><div class="ttdeci">#define spi_busy(spi_no)</div><div class="ttdef"><b>Definition:</b> <a href="_meter_logger_2include_2driver_2spi_8h_source.html#l00066">spi.h:66</a></div></div>
<div class="ttc" id="structnetif_html_acaaac9b415a7be73eb8a287c8ed18a8d"><div class="ttname"><a href="structnetif.html#acaaac9b415a7be73eb8a287c8ed18a8d">netif::linkoutput</a></div><div class="ttdeci">netif_linkoutput_fn linkoutput</div><div class="ttdef"><b>Definition:</b> <a href="netif_8h_source.html#l00158">netif.h:158</a></div></div>
<div class="ttc" id="espenc_8c_html_a193505f7e2d8f132ca9698a32783fe93"><div class="ttname"><a href="espenc_8c.html#a193505f7e2d8f132ca9698a32783fe93">espenc_init</a></div><div class="ttdeci">struct netif * espenc_init(uint8_t *mac_addr, ip_addr_t *ip, ip_addr_t *mask, ip_addr_t *gw, bool dhcp)</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00429">espenc.c:429</a></div></div>
<div class="ttc" id="espenc_8h_html_a2c2511b1039fa0939bc33262effaa9ba"><div class="ttname"><a href="espenc_8h.html#a2c2511b1039fa0939bc33262effaa9ba">ERXND</a></div><div class="ttdeci">#define ERXND</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00038">espenc.h:38</a></div></div>
<div class="ttc" id="_meter_logger_2include_2driver_2spi_8h_html_a22bd615ece7185b5f635eae8facd0994"><div class="ttname"><a href="_meter_logger_2include_2driver_2spi_8h.html#a22bd615ece7185b5f635eae8facd0994">HSPI</a></div><div class="ttdeci">#define HSPI</div><div class="ttdef"><b>Definition:</b> <a href="_meter_logger_2include_2driver_2spi_8h_source.html#l00036">spi.h:36</a></div></div>
<div class="ttc" id="pbuf_8h_html_ac6efc2aaeddfea6c95729dc86f785ba4"><div class="ttname"><a href="pbuf_8h.html#ac6efc2aaeddfea6c95729dc86f785ba4">pbuf_alloc</a></div><div class="ttdeci">struct pbuf * pbuf_alloc(pbuf_layer l, u16_t length, pbuf_type type) ICACHE_FLASH_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="pbuf_8c_source.html#l00234">pbuf.c:234</a></div></div>
<div class="ttc" id="espenc_8c_html_ab8597c7950c0283f785e57b4e02ad76f"><div class="ttname"><a href="espenc_8c.html#ab8597c7950c0283f785e57b4e02ad76f">chipDisable</a></div><div class="ttdeci">void ICACHE_FLASH_ATTR chipDisable()</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8c_source.html#l00033">espenc.c:33</a></div></div>
<div class="ttc" id="esp-open-lwip_2include_2lwip_2ip__addr_8h_html_a58aee4166c466f9ac7035bf5cc9f9974"><div class="ttname"><a href="esp-open-lwip_2include_2lwip_2ip__addr_8h.html#a58aee4166c466f9ac7035bf5cc9f9974">IP4_ADDR</a></div><div class="ttdeci">#define IP4_ADDR(ipaddr, a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="esp-open-lwip_2include_2lwip_2ip__addr_8h_source.html#l00139">ip_addr.h:139</a></div></div>
<div class="ttc" id="espenc_8h_html_ae1ae45ce0e49f35d25bb1641f7c6942c"><div class="ttname"><a href="espenc_8h.html#ae1ae45ce0e49f35d25bb1641f7c6942c">ENC28J60_SOFT_RESET</a></div><div class="ttdeci">#define ENC28J60_SOFT_RESET</div><div class="ttdef"><b>Definition:</b> <a href="espenc_8h_source.html#l00226">espenc.h:226</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
